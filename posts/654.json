{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":44728387,"authorName":"David Goodwin","from":"David Goodwin &lt;dgoodwin@...&gt;","profile":"dggoodwin","replyTo":"LIST","senderId":"Hrf4ci6b0-dh5pdm-l2ZTWxH6WjKCi-xd5T-40J5GQSJ9wi-4RjiBymZlVHc_hY1REWkeAIY4CIRg0WaNxwri1bUzJ891MC6DKui","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [cantera] Errors setting entropy and pressure in fluids","postDate":"1104897569","msgId":654,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDMzMEJDNDlCLTVFQ0UtMTFEOS1CNjMzLTAwMEQ5M0FFMjQxQUBjYWx0ZWNoLmVkdT4=","inReplyToHeader":"PGNyZjJvcyt2cXI5QGVHcm91cHMuY29tPg==","referencesHeader":"PGNyZjJvcyt2cXI5QGVHcm91cHMuY29tPg=="},"prevInTopic":653,"nextInTopic":658,"prevInTime":653,"nextInTime":655,"topicId":653,"numMessagesInTopic":4,"msgSnippet":"Rebecca, There was a problem with ext/tpx/Sub.cpp that I have now fixed. The problem was created when I put in a seemingly-reasonable error check, that had the","rawEmail":"Return-Path: &lt;dgoodwin@...&gt;\r\nX-Sender: dgoodwin@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 94658 invoked from network); 5 Jan 2005 03:59:51 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m3.grp.scd.yahoo.com with QMQP; 5 Jan 2005 03:59:51 -0000\r\nReceived: from unknown (HELO outgoing-mail.its.caltech.edu) (131.215.49.69)\n  by mta5.grp.scd.yahoo.com with SMTP; 5 Jan 2005 03:59:51 -0000\r\nReceived: from water-dog (water-dog [192.168.1.26])\n\tby earth-ox-postvirus (Postfix) with ESMTP id 6B8D3109B68\n\tfor &lt;cantera@yahoogroups.com&gt;; Tue,  4 Jan 2005 19:59:51 -0800 (PST)\r\nReceived: from earth-ox ([192.168.1.9])\n\tby water-dog (MailMonitor for SMTP v1.2.2 ) ;\n\tTue, 4 Jan 2005 19:59:50 -0800 (PST)\r\nReceived: from [10.0.1.2] (charter-241-015.caltech.edu [131.215.241.15])\n\tby earth-ox.its.caltech.edu (Postfix) with ESMTP id 63834109D41\n\tfor &lt;cantera@yahoogroups.com&gt;; Tue,  4 Jan 2005 19:59:50 -0800 (PST)\r\nMime-Version: 1.0 (Apple Message framework v619)\r\nIn-Reply-To: &lt;crf2os+vqr9@...&gt;\r\nReferences: &lt;crf2os+vqr9@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed\r\nMessage-Id: &lt;330BC49B-5ECE-11D9-B633-000D93AE241A@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Tue, 4 Jan 2005 19:59:29 -0800\r\nTo: cantera@yahoogroups.com\r\nX-Mailer: Apple Mail (2.619)\r\nX-Spam-Status: No, hits=0.0 tagged_above=-100000.0 required=5.0 \r\nX-Spam-Level: \r\nX-eGroups-Remote-IP: 131.215.49.69\r\nFrom: David Goodwin &lt;dgoodwin@...&gt;\r\nSubject: Re: [cantera] Errors setting entropy and pressure in fluids\r\nX-Yahoo-Group-Post: member; u=44728387\r\nX-Yahoo-Profile: dggoodwin\r\n\r\nRebecca,\n\nThere was a problem with ext/tpx/Sub.cpp that I have now fixed. The \nproblem was created when I put in a seemingly-reasonable error check, \nthat had the side effect of causing the error you found whenever \nsetting a state within the vapor dome, starting with one with a \ntemperature greater than Tcrit.  The problem is solved by adding one \nline in method &#39;Tsat&#39;. I have now done this, and updated the CVS \nrepository.  Your m-file should run now.\n\n  Dave\n\n\nOn Jan 4, 2005, at 1:45 PM, rahunt_xyz wrote:\n\n&gt;\n&gt;\n&gt; We are working on some MATLAB code that uses the tpx part of Cantera\n&gt; and are finding some trouble when trying to simultaneously set entropy\n&gt; and pressure for pure fluids.  In particular, we are working with \n&gt; water.\n&gt;\n&gt; We had previously used this part of Cantera without error with version\n&gt; 1.5.4 from the windows installer (downloaded from SourceForge).  Now\n&gt; we have built version 1.5.5 and also the latest version from CVS and\n&gt; are finding that we are getting some seemingly flaky results.  In\n&gt; particular, set(W,&#39;P&#39;,ppp,&#39;S&#39;,sss) works under some circumstances, and\n&gt; fails under others.\n&gt;\n&gt; We are including a sample MATLAB m file that should reliably\n&gt; demonstrate the error. I&#39;m curious about whether anyone has had\n&gt; similar problems with this, either in Matlab or when using the Python\n&gt; or C.  I&#39;d also welcome any ideas for solutions.   I&#39;d be happy to\n&gt; send along the liquidvapor.xml file we are using if that helps.\n&gt;\n&gt; (BTW One small thing we found with the last version of ext/tpx/Sub.cpp\n&gt; is that line 353 should test that i &gt;= 20 instead of 200, but this\n&gt; does not change the error given in the following code.)\n&gt;\n&gt; Rebecca Hunt\n&gt;\n&gt; m code included below\n&gt; ---------------------------- LiqVapErr.m------------------\n&gt;\n&gt; close all\n&gt; clear all\n&gt;\n&gt; % Set up some Temperature and Pressure limits\n&gt;\n&gt; Pmin = 100000;\n&gt; Pmax = 260*100000;\n&gt; Tmin = 320;\n&gt; Tmax = 845;\n&gt;\n&gt; % Create the pure fluid object\n&gt;\n&gt; W = importPhase(&#39;liquidvapor.xml&#39;,&#39;water&#39;);\n&gt;\n&gt; % A simple TP set works...\n&gt;\n&gt; set(W,&#39;T&#39;,Tmin,&#39;P&#39;,Pmin);\n&gt;\n&gt; S1 = entropy_mass(W);\n&gt;\n&gt; % Increasing pressure at constant entropy works...\n&gt;\n&gt; set(W,&#39;P&#39;,Pmax,&#39;S&#39;,S1);\n&gt;\n&gt; % Another TP set...\n&gt;\n&gt; set(W,&#39;T&#39;,Tmax,&#39;P&#39;,Pmax);\n&gt;\n&gt; S3 = entropy_mass(W);\n&gt;\n&gt; % The following line of code fails as follows:\n&gt; %\n&gt; %************************************************\n&gt; %                Cantera Error!\n&gt; %************************************************\n&gt; %\n&gt; %\n&gt; %Procedure: tpx::Substance::update_sat\n&gt; %Error:   wrong root found for sat. liquid or vapor\n&gt; %\n&gt; %Error in ==&gt; @ThermoPhase&#92;private&#92;thermo_set at 5\n&gt; %  i = ctmethods(20,n,-job,a);\n&gt; %\n&gt; %Error in ==&gt; ThermoPhase.setState_SP at 15\n&gt; %thermo_set(a.tp_id,23,sp);\n&gt; %\n&gt; %Error in ==&gt; Solution.set at 166\n&gt; %    setState_SP(a,[sval,pval]);\n&gt; %\n&gt; %Error in ==&gt; LiqVapError at 53\n&gt; %set(W,&#39;P&#39;,Pmin,&#39;S&#39;,S3);\n&gt;\n&gt; set(W,&#39;P&#39;,Pmin,&#39;S&#39;,S3);\n&gt;\n&gt; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n&gt; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n&gt;\n&gt; % However, without clearing the variable space, one can re-set the \n&gt; state:\n&gt;\n&gt; set(W,&#39;T&#39;,300,&#39;P&#39;,101325);\n&gt;\n&gt; % And then re-try the failed command...\n&gt;\n&gt; set(W,&#39;P&#39;,Pmin,&#39;S&#39;,S3);\n&gt;\n&gt; % Which now works; the &#39;seed&#39; values for P-rho-T iteration were\n&gt; % different.\n&gt; ------------------------------------------------------------------\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n\n"}}