{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":300436692,"authorName":"ds2taieb","from":"&quot;ds2taieb&quot; &lt;ds2taieb@...&gt;","profile":"ds2taieb","replyTo":"LIST","senderId":"xijRMyuQK5rCJI91x_PX6vN5CyjpFNYYI_H5on3738njpT2h3HhQtmYfTFTQspSRLyQGBlcSWn2kLbU3OAR2yEhPsMU","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Problem &quot;Time integration failed&quot;","postDate":"1173183688","msgId":1544,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGVzam1jOCttNzJzQGVHcm91cHMuY29tPg==","inReplyToHeader":"PEExNEYyRkNFLTFCMDMtMTFEOS04MkUxLTAwMEQ5M0FFMjQxQUBjYWx0ZWNoLmVkdT4="},"prevInTopic":531,"nextInTopic":0,"prevInTime":1543,"nextInTime":1545,"topicId":530,"numMessagesInTopic":3,"msgSnippet":"Hello, I have the same problem with the supplied script flame2.py . I have added some modifications. They are two loops to compute with variable composition","rawEmail":"Return-Path: &lt;ds2taieb@...&gt;\r\nReceived: (qmail 61165 invoked from network); 8 Mar 2007 21:05:49 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m46.grp.scd.yahoo.com with QMQP; 8 Mar 2007 21:05:49 -0000\r\nReceived: from unknown (HELO n28.bullet.scd.yahoo.com) (66.94.237.21)\n  by mta8.grp.scd.yahoo.com with SMTP; 8 Mar 2007 21:05:49 -0000\r\nReceived: from [66.218.69.5] by n28.bullet.scd.yahoo.com with NNFMP; 08 Mar 2007 21:05:43 -0000\r\nReceived: from [66.218.66.85] by t5.bullet.scd.yahoo.com with NNFMP; 08 Mar 2007 21:05:43 -0000\r\nX-Sender: ds2taieb@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 80001 invoked from network); 6 Mar 2007 12:21:40 -0000\r\nReceived: from unknown (66.218.67.34)\n  by m25.grp.scd.yahoo.com with QMQP; 6 Mar 2007 12:21:40 -0000\r\nReceived: from unknown (HELO n18a.bullet.sp1.yahoo.com) (69.147.64.127)\n  by mta8.grp.scd.yahoo.com with SMTP; 6 Mar 2007 12:21:40 -0000\r\nReceived: from [216.252.122.216] by n18.bullet.sp1.yahoo.com with NNFMP; 06 Mar 2007 12:21:29 -0000\r\nReceived: from [66.218.69.1] by t1.bullet.sp1.yahoo.com with NNFMP; 06 Mar 2007 12:21:29 -0000\r\nReceived: from [66.218.66.87] by t1.bullet.scd.yahoo.com with NNFMP; 06 Mar 2007 12:21:29 -0000\r\nDate: Tue, 06 Mar 2007 12:21:28 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;esjmc8+m72s@...&gt;\r\nIn-Reply-To: &lt;A14F2FCE-1B03-11D9-82E1-000D93AE241A@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;ds2taieb&quot; &lt;ds2taieb@...&gt;\r\nSubject: Re: Problem &quot;Time integration failed&quot;\r\nX-Yahoo-Group-Post: member; u=300436692; y=PpPEC3nHx8yXZNU4fOXEPnwcQme4SoYqBH3otGlKk3dXO8I\r\nX-Yahoo-Profile: ds2taieb\r\nX-eGroups-Approved-By: dggoodwin &lt;dgoodwin@...&gt; via web; 08 Mar 2007 21:05:42 -0000\r\n\r\nHello,\n\nI have the same problem with the supplied script &quot;flame2.py&quot;. \nI ha=\r\nve added some modifications. They are two loops to compute with \nvariable c=\r\nomposition and variable flowrate. \n\nSo the script runs well for the three o=\r\nr four first composition \n(with a constante flowrate), but it bugs after.I =\r\nhave tested \ndifferent initial values, but it doesn&#39;t bring a good solution=\r\n.\n\nSo when I have looked for this problem on the user&#39;s group forum, I \nrea=\r\nd this post. My question is what represent the tol_ss, tol_ts for \nthe solv=\r\ning algorithm? And where can I find the source of the Newton \nalgorithm?\n\nT=\r\nhanks\n\nRegards, David\n\n--- In cantera@yahoogroups.com, David Goodwin &lt;dgood=\r\nwin@...&gt; wrote:\n&gt;\n&gt; Steve,\n&gt; \n&gt; There are several things you can try.  Prob=\r\nably the best bet is to \n&gt; start with a simpler mechanism and generate a fl=\r\name solution that \ncan \n&gt; be used as the initial guess with the bigger mech=\r\nanism. Cantera \n&gt; automatically takes care of changed species order in the =\r\narrays \nwhen \n&gt; you start from a previous solution generated with a differe=\r\nnt \nmechanism \n&gt; as long as the corresponding species in each mechanism hav=\r\ne the \nsame \n&gt; name (i.e., if methane is called &#39;CH4&#39; in one, it must be in=\r\n the \nother \n&gt; too.) so it is easy to start with small mechanisms and work =\r\nup.  \nYou \n&gt; can also try holding the temperature fixed, or not refining th=\r\ne \ngrid, \n&gt; or refining it more, or...  Unfortunately since these problems =\r\nare \n&gt; highly nonlinear, there is no foolproof way to get a converged \n&gt; so=\r\nlution.\n&gt; \n&gt; One thing you might do is increase the value of loglevel to ab=\r\nout \n5, \n&gt; which will cause a great deal of information to be printed, \ninc=\r\nluding \n&gt; which solution component is not converging.\n&gt; \n&gt; Dave G.\n&gt; \n&gt; \n&gt; =\r\nOn Oct 10, 2004, at 1:29 PM, s_patyk wrote:\n&gt; \n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Dear Prof. G=\r\noodwin,\n&gt; &gt;\n&gt; &gt; I have OneDim Solve running in Python. When I try to simula=\r\nte a\n&gt; &gt; burner-stabilized, premixed methane+7%toluene/air flat flame \nwith=\r\n my\n&gt; &gt; own mechanism file n-butane (N.M. Marinow) I get two different\n&gt; &gt; =\r\nerrors like:\n&gt; &gt;\n&gt; &gt; - Traceback (most recent call last):\n&gt; &gt;   File &quot;C:&#92;Py=\r\nthon23&#92;Cantera&#92;demos&#92;Python&#92;ch4+c7h8a.py&quot;, line 89, \nin ?\n&gt; &gt;     f.solve(l=\r\noglevel, refine_grid)\n&gt; &gt;   File &quot;C:&#92;Python23&#92;Lib&#92;site-\npackages&#92;Cantera&#92;On=\r\neD&#92;BurnerFlame.py&quot;,\n&gt; &gt; line 55, in solve\n&gt; &gt;     Stack.solve(self, logleve=\r\nl =3D loglevel, refine_grid =3D \nrefine_grid)\n&gt; &gt;   File &quot;C:&#92;Python23&#92;Lib&#92;s=\r\nite-packages&#92;Cantera&#92;OneD&#92;onedim.py&quot;, \nline\n&gt; &gt; 412, in solve\n&gt; &gt;     retur=\r\nn _cantera.sim1D_solve(self._hndl, loglevel, \nrefine_grid)\n&gt; &gt; error:\n&gt; &gt;\n&gt;=\r\n &gt; Procedure: OneDim::timeStep\n&gt; &gt; Error:   Time integration faile\n&gt; &gt;\n&gt; &gt;\n=\r\n&gt; &gt; - or when i specify other composition or different parameter of\n&gt; &gt; tol=\r\n_ss, tol_ts, it keeps going (for a long time &gt;&gt;20h) and not\n&gt; &gt; solwing the=\r\n problem\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; I guess it&#39;s a problem of the solution method or possi=\r\nbly to many\n&gt; &gt; species and reactions in mechanism file ? What can I do ? C=\r\nan I \nuse\n&gt; &gt; temperature profile and turn off the energy equations?, so I =\r\nshow\n&gt; &gt; below\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; best regards\n&gt; &gt; Steve Patyk\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;=\r\n P.S. This is my script (based on flame2.py):\n&gt; &gt;\n&gt; &gt; from Cantera import *=\r\n\n&gt; &gt; from Cantera.OneD import *\n&gt; &gt; from time import clock\n&gt; &gt; t0 =3D clock=\r\n()\n&gt; &gt; p         =3D   1.0*OneAtm           \t \t\t\n&gt; &gt; tburner   =3D   300.0 =\r\n               \t \t\t\n&gt; &gt; mdot      =3D   0.04                  \t\t\t\n&gt; &gt; comp =\r\n     =3D  &#39;ch4:0.667556742, c6h5ch3:0.005192108, o2:1,\n&gt; &gt; n2:3.7619&#39;  \t\t\n&gt;=\r\n &gt; initial_grid =3D [0.0, 0.01, 0.025, 0.05, 0.075, 0.1]\n&gt; &gt; pos =3D [0.0, =\r\n0.001, 0.01, 0.025, 0.05, 0.075, 0.099, 0.1, 0.2]\n&gt; &gt; temp =3D [373, 450, 7=\r\n00, 900, 1200, 1400, 1600, 1400, 1100\n&gt; &gt; tol_ss    =3D [1.0e-5, 1.0e-11]\n&gt;=\r\n &gt; tol_ts    =3D [1.0e-5, 1.0e-9]\n&gt; &gt; loglevel  =3D 1\n&gt; &gt; \trefine_grid =3D =\r\n1                    \t\t\t\n&gt; &gt;\n&gt; &gt; gas =3D importPhase(&quot;mechnbutane.cti&quot;, &quot;nb=\r\nutane&quot;)\n&gt; &gt; reactions =3D &quot;nbutane: 0001 to 0450&quot;\t\t\n&gt; &gt;\n&gt; &gt; gas.set(T =3D t=\r\nburner, P =3D p, X =3D comp)\n&gt; &gt; f =3D BurnerFlame(gas =3D gas, grid =3D in=\r\nitial_grid)\n&gt; &gt; f.burner.set(massflux =3D mdot, mole_fractions =3D comp, te=\r\nmperature \n=3D\n&gt; &gt; tburner)\n&gt; &gt; f.set(tol =3D tol_ss, tol_time =3D tol_ts)\n=\r\n&gt; &gt; f.showSolution()\n&gt; &gt; f.set(energy =3D &#39;off&#39;)\n&gt; &gt; f.setRefineCriteria(ra=\r\ntio =3D 20, slope =3D 0.5, curve =3D 0.2)\n&gt; &gt; f.setMaxJacAge(50, 50)\n&gt; &gt; f.=\r\nsetTimeStep(1.0e-5,[1, 2, 5, 10, 20, 30, 50])\n&gt; &gt; f.solve(loglevel, refine_=\r\ngrid)\n&gt; &gt; f.showSolution()\n&gt; &gt;\n&gt; &gt; f.set(energy =3D &#39;on&#39;)\n&gt; &gt; f.setRefineCr=\r\niteria(ratio =3D 50.0, slope =3D 0.8, curve =3D 0.5)\n&gt; &gt; f.solve(loglevel, =\r\nrefine_grid)\n&gt; &gt;\n&gt; &gt; f.showSolution()\n&gt; &gt;\n&gt; &gt; z =3D f.flame.grid()\n&gt; &gt; T =\r\n=3D f.T()\n&gt; &gt; u =3D f.u()\n&gt; &gt;\n&gt; &gt; fcsv =3D open(&#39;ch4+c7h8_L07.csv&#39;,&#39;w&#39;)\n&gt; &gt;=\r\n writeCSV(fcsv, [&#39;z (m)&#39;, &#39;u (m/s)&#39;, &#39;T (K)&#39;, &#39;rho (kg/m3)&#39;,\n&gt; \n&gt;          =\r\n       &quot;oh&quot;, &quot;h&quot;, &quot;o&quot;, &quot;ho2&quot;, &quot;h2o2&quot;, &quot;c2h2&quot;, &quot;h2ccch&quot;, &quot;c\n6h\n&gt; &gt; 6&quot;]\n&gt; &gt;  =\r\n        )\n&gt; &gt;\n&gt; &gt; for n in range(f.flame.nPoints()):\n&gt; &gt;     f.setGasState(=\r\nn)\n&gt; &gt;     writeCSV(fcsv, [z[n], u[n], T[n], gas.density()]\n&gt; &gt;            =\r\n  +list(gas.moleFractions\n&gt; &gt; ([&quot;oh&quot;, &quot;h&quot;, &quot;o&quot;, &quot;ho2&quot;, &quot;h2o2&quot;, &quot;c2h2&quot;, &quot;h2c=\r\ncch&quot;, &quot;c6h6&quot;])))\n&gt; &gt; fcsv.close()\n&gt; &gt; print &#39;solution saved to ch4+c7h8_L07=\r\n.csv&#39;\n&gt; &gt; f.showStats()\n&gt; &gt; print &#39;Time to solve [s] =3D &#39;,clock() - t0\n&gt; &gt;=\r\n\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt; Yahoo!=\r\n Groups Links\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt; &gt;\n&gt;\n\n\n\n"}}