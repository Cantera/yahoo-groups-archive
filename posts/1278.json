{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":254563161,"authorName":"Dan Smyth","from":"&quot;Dan Smyth&quot; &lt;das69@...&gt;","profile":"dan_gaidin_ut","replyTo":"LIST","senderId":"8vt8Q2_xw-nEWdiwDU1JCeYphbYlXTrhVs2Q3UfarEQ3IN7lqLNOkC2ED-gAmH6CZmi7VyodA1x2pdwmnntD_MzuhmcZ","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: negative_A reaction option returning nan","postDate":"1152136808","msgId":1278,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGU4aGNwOCs2NzJhQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDNBQ0M3ODk3QTk0NjMxNDFCRTBEOTM4RkMzMURGRDE5MDFDNjdGNjFARVMyMlNOTE5ULnNybi5zYW5kaWEuZ292Pg=="},"prevInTopic":1276,"nextInTopic":1280,"prevInTime":1277,"nextInTime":1279,"topicId":1264,"numMessagesInTopic":8,"msgSnippet":"Hey, Thanks Harry.  I ve updated my CVS version of Cantera and things seem to be working just fine.  I ll be sure to look for that final fix for this bug and","rawEmail":"Return-Path: &lt;das69@...&gt;\r\nX-Sender: das69@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 87099 invoked from network); 5 Jul 2006 22:03:33 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m37.grp.scd.yahoo.com with QMQP; 5 Jul 2006 22:03:33 -0000\r\nReceived: from unknown (HELO n19a.bullet.scd.yahoo.com) (66.94.237.48)\n  by mta4.grp.scd.yahoo.com with SMTP; 5 Jul 2006 22:03:33 -0000\r\nReceived: from [66.218.66.59] by n19.bullet.scd.yahoo.com with NNFMP; 05 Jul 2006 22:00:09 -0000\r\nReceived: from [66.218.66.70] by t8.bullet.scd.yahoo.com with NNFMP; 05 Jul 2006 22:00:09 -0000\r\nDate: Wed, 05 Jul 2006 22:00:08 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;e8hcp8+672a@...&gt;\r\nIn-Reply-To: &lt;3ACC7897A9463141BE0D938FC31DFD1901C67F61@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;Dan Smyth&quot; &lt;das69@...&gt;\r\nSubject: Re: negative_A reaction option returning nan\r\nX-Yahoo-Group-Post: member; u=254563161; y=y0_gJZv4zr-wr9KD3jGVZCXAzEobvjftC4I80CxEKXVcRmzQTenx_g\r\nX-Yahoo-Profile: dan_gaidin_ut\r\n\r\nHey,\n\nThanks Harry.  I&#39;ve updated my CVS version of Cantera and things seem=\r\n\nto be working just fine.  I&#39;ll be sure to look for that final fix for\nthis=\r\n bug and update again when that comes around.\n\nDan\n\n--- In cantera@yahoogro=\r\nups.com, &quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt; wrote:\n&gt;\n&gt; Hi,\n&gt; \n&gt; I&#39;ve implement=\r\ned an initial fix to this bug and have added a test\n&gt; problem to the test s=\r\nuite to ensure coverage. These are now checked into\n&gt; the CVS repository. T=\r\nhere is still some additional work to be done here,\n&gt; as the fix I&#39;ve intro=\r\nduced allows for any reaction to have a negative or\n&gt; zero preexponential v=\r\nalue, at least in the evaluation routine.\n&gt; \n&gt; A more permanent fix to the =\r\nbug, where the combined net rate of progress\n&gt; for a set of duplicate react=\r\nions is ensured to be positive, still needs\n&gt; to be developed.\n&gt; \n&gt; Harry M=\r\noffat\n&gt; \n&gt; \n&gt; \n&gt; -----Original Message-----\n&gt; From: cantera@yahoogroups.com=\r\n [mailto:cantera@yahoogroups.com] On Behalf\n&gt; Of Dan Smyth\n&gt; Sent: Monday, =\r\nJuly 03, 2006 10:58 AM\n&gt; To: cantera@yahoogroups.com\n&gt; Subject: [cantera] R=\r\ne: negative_A reaction option returning nan\n&gt; \n&gt; Really what it comes down =\r\nto, as far as I understand, is the fact that\n&gt; all of these reaction rate c=\r\noefficients (A, n, Ea) are all just best-fit\n&gt; parameters.  The way that th=\r\nis particular reaction was put together, was\n&gt; to have the rate of this sin=\r\ngle reaction be a combination of two\n&gt; identical reactions with different r=\r\nates:\n&gt; \n&gt; NH+NO=3DN2O+H    2.94E+14  -0.40   0.000E+00\n&gt; NH+NO=3DN2O+H    =\r\n-2.16E+13  -0.23   0.000E+00\n&gt; \n&gt; So, the actual overall forward rate of re=\r\naction is (where both are based\n&gt; on zero activation energy):\n&gt; \n&gt; rate_f=\r\n=3D (2.94E+14)*T^(-0.40)*[NH][NO] + (-2.16E+13)*T^(-0.23)*[NH][NO]\n&gt; \n&gt; whi=\r\nch simplifies to:\n&gt; \n&gt; rate_f=3D (2.94E+14*T^(-0.40) - 2.16E+13*T^(-0.23))*=\r\n[NH][NO]\n&gt; \n&gt; where the &quot;new overall&quot; kf is:\n&gt; \n&gt; kf=3D 2.94E+14*T^(-0.40) =\r\n- 2.16E+13*T^(-0.23)\n&gt; \n&gt; which should turn out to be a positive number eve=\r\nry time in order to\n&gt; keep the thermodynamics consistent (emphasis on shoul=\r\nd).  Then, then\n&gt; reaction rate coefficient for the reverse reaction (kr) c=\r\nan be\n&gt; calculated in the typical way with Keq.  Hope all this helps more t=\r\nhan\n&gt; it confuses. :)\n&gt; \n&gt; Dan\n&gt; \n&gt; --- In cantera@yahoogroups.com, &quot;andr_1=\r\n976&quot; &lt;andr1976@&gt; wrote:\n&gt; &gt;\n&gt; &gt; Dear Dan\n&gt; &gt; \n&gt; &gt; I&#39;m not really sure that =\r\nI understand the concept of a negative \n&gt; &gt; prefactor, however this might b=\r\ne a fix:\n&gt; &gt; A negative prefactor should result in a a negative rate consta=\r\nnt.\n&gt; &gt; According to the principle of microscopic reversiblility\n&gt; &gt; \n&gt; &gt; k=\r\n_b =3D k_f/K_eq\n&gt; &gt; \n&gt; &gt; , where K_eq is the equilibirum constant for an el=\r\nementary reaction \n&gt; &gt; step and k_f and k_b are the forward and backward ra=\r\nte constants, \n&gt; &gt; respectively. Since K_eq can not be negavtive (at least =\r\nfrom my \n&gt; &gt; knowledge of basic statistical thermodynamics) a negative k_a =\r\nwould \n&gt; &gt; result in k_b being negative as well. For a simple reaction, say=\r\n,\n&gt; &gt; \n&gt; &gt; a + b =3D c\n&gt; &gt; \n&gt; &gt; the rate equation is:\n&gt; &gt; \n&gt; &gt; r =3D k_f *[=\r\na]*[b] - k_b[c]\n&gt; &gt; \n&gt; &gt; Changing the sign of both k_f and k_b\n&gt; &gt; \n&gt; &gt; r =\r\n=3D -k_f *[a]*[b] + k_b*[c]\n&gt; &gt; \n&gt; &gt; This is actually equal to the rate equ=\r\nation of the reverse reaction.\n&gt; &gt; Thus, in my point of view a negative pre=\r\nfactor is just a &quot;cover up&quot; of\n&gt; \n&gt; &gt; the fact that the reaction was writte=\r\nn up in the wrong direction.\n&gt; &gt; Does this make any sense, or have I comple=\r\ntely missed the point here?\n&gt; &gt; \n&gt; &gt; Kind regards\n&gt; &gt; \n&gt; &gt; Anders   \n&gt; &gt; \n&gt;=\r\n &gt; --- In cantera@yahoogroups.com, &quot;Dan Smyth&quot; &lt;das69@&gt; wrote:\n&gt; &gt; &gt;\n&gt; &gt; &gt; =\r\nHi,\n&gt; &gt; &gt; \n&gt; &gt; &gt; I have successfully installed Cantera onto my Linux box an=\r\nd am \n&gt; &gt; &gt; trying to replace numerous Chemkin subroutines in a code of min=\r\ne \n&gt; &gt; &gt; with corresponding Cantera calls.  I have translated a mechanism \n=\r\n&gt; &gt; &gt; from the Chemkin format into Cantera format by using the ck2cti \n&gt; &gt; =\r\n&gt; program with the verification option and seemed to pass.  I&#39;m \n&gt; &gt; &gt; call=\r\ning\n&gt; &gt; &gt; getNetProductionRates(wdot) from my program and am getting &quot;nan&quot; =\r\nin \n&gt; &gt; &gt; return for seven different species.  I have tracked the problem b=\r\ny\n&gt; &gt; &gt; calling:\n&gt; &gt; &gt; \n&gt; &gt; &gt; getFwdRatesOfProgress\n&gt; &gt; &gt; getRevRatesOfProg=\r\nress\n&gt; &gt; &gt; getFwdRateConstants\n&gt; &gt; &gt; getRevRateConstants\n&gt; &gt; &gt; \n&gt; &gt; &gt; and h=\r\nave found that there are two reactions in my mechanism that are\n&gt; \n&gt; &gt; &gt; re=\r\nturning a &quot;nan&quot; value.  They are both reactions that have been \n&gt; &gt; &gt; decla=\r\nred as duplicate reactions and they also both have negative \n&gt; &gt; &gt; pre-expo=\r\nnentials.  (These are the only reactions in my mechanism \n&gt; &gt; &gt; that have a=\r\n negative pre-exponential.)  My original Chemkin \n&gt; &gt; &gt; mechanism file had =\r\nthe following within it:\n&gt; &gt; &gt; \n&gt; &gt; &gt; First Reaction:\n&gt; &gt; &gt; NH+NO=3DN2O+H  =\r\n             2.94E+14  -0.40   0.000E+00\n&gt; &gt; &gt; DUP\n&gt; &gt; &gt; NH+NO=3DN2O+H     =\r\n         -2.16E+13  -0.23   0.000E+00\n&gt; &gt; &gt; DUP\n&gt; &gt; &gt; \n&gt; &gt; &gt; Second Reactio=\r\nn:\n&gt; &gt; &gt; NH2+NO=3DN2+H2O             1.30E+16  -1.25   0.000E+00\n&gt; &gt; &gt; DUP\n=\r\n&gt; &gt; &gt; NH2+NO=3DN2+H2O            -2.80E+13  -0.55   0.000E+00\n&gt; &gt; &gt; DUP\n&gt; &gt;=\r\n &gt; \n&gt; &gt; &gt; The listed reactions in the cti conversion of this mechanism file=\r\n \n&gt; &gt; &gt; look like this:\n&gt; &gt; &gt; \n&gt; &gt; &gt; First Reaction:\n&gt; &gt; &gt; #  Reaction 77\n&gt;=\r\n &gt; &gt; #  10.5, 9 (a)\n&gt; &gt; &gt; #  Miller & Melius, 24th Symp. on Comb., 1992.\n&gt; =\r\n&gt; &gt; reaction(  &quot;NH + NO &lt;=3D&gt; N2O + H&quot;,  [2.94000E+14, -0.4, 0],\n&gt; &gt; &gt;     =\r\n     options =3D [&quot;duplicate&quot;])\n&gt; &gt; &gt; \n&gt; &gt; &gt; #  Reaction 78\n&gt; &gt; &gt; reaction(=\r\n  &quot;NH + NO &lt;=3D&gt; N2O + H&quot;,  [-2.16000E+13, -0.23, 0],\n&gt; &gt; &gt;          option=\r\ns =3D [&quot;negative_A&quot;, &quot;duplicate&quot;])\n&gt; &gt; &gt; \n&gt; &gt; &gt; Second Reaction:\n&gt; &gt; &gt; #  R=\r\neaction 90\n&gt; &gt; &gt; #  10.6, 9 (b)\n&gt; &gt; &gt; #  Glarborg et al., Int. J. Chem. Kin=\r\net., 26, 421, 1994.\n&gt; &gt; &gt; reaction(  &quot;NH2 + NO &lt;=3D&gt; N2 + H2O&quot;,  [1.30000E+=\r\n16, -1.25, 0],\n&gt; &gt; &gt;          options =3D [&quot;duplicate&quot;])\n&gt; &gt; &gt; \n&gt; &gt; &gt; #  Re=\r\naction 91\n&gt; &gt; &gt; reaction(  &quot;NH2 + NO &lt;=3D&gt; N2 + H2O&quot;,  [-2.80000E+13, -0.55=\r\n, 0],\n&gt; &gt; &gt;          options =3D [&quot;negative_A&quot;, &quot;duplicate&quot;])\n&gt; &gt; &gt; \n&gt; &gt; &gt; =\r\nAnd the xml translation contains the following:\n&gt; &gt; &gt; \n&gt; &gt; &gt; First Reaction=\r\n:\n&gt; &gt; &gt;     &lt;!-- reaction 0077    --&gt;\n&gt; &gt; &gt;     &lt;reaction duplicate=3D&quot;yes&quot;=\r\n reversible=3D&quot;yes&quot; id=3D&quot;0077&quot;&gt;\n&gt; &gt; &gt;       &lt;equation&gt;NH + NO [=3D] N2O + =\r\nH&lt;/equation&gt;\n&gt; &gt; &gt;       &lt;rateCoeff&gt;\n&gt; &gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt; &gt;       =\r\n     &lt;A&gt;2.940000E+11&lt;/A&gt;\n&gt; &gt; &gt;            &lt;b&gt;-0.40000000000000002&lt;/b&gt;\n&gt; &gt; &gt;=\r\n            &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt; &gt;         &lt;/Arrhenius&gt;\n&gt; =\r\n&gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt; &gt;       &lt;reactants&gt;NH:1.0 NO:1&lt;/reactants&gt;\n&gt; &gt; &gt;=\r\n       &lt;products&gt;H:1 N2O:1.0&lt;/products&gt;\n&gt; &gt; &gt;     &lt;/reaction&gt;\n&gt; &gt; &gt; \n&gt; &gt; &gt; =\r\n    &lt;!-- reaction 0078    --&gt;\n&gt; &gt; &gt;     &lt;reaction duplicate=3D&quot;yes&quot; reversi=\r\nble=3D&quot;yes&quot; negative_A=3D&quot;yes&quot;\n&gt; &gt; id=3D&quot;0078&quot;&gt;\n&gt; &gt; &gt;       &lt;equation&gt;NH + =\r\nNO [=3D] N2O + H&lt;/equation&gt;\n&gt; &gt; &gt;       &lt;rateCoeff&gt;\n&gt; &gt; &gt;         &lt;Arrheniu=\r\ns&gt;\n&gt; &gt; &gt;            &lt;A&gt;-2.160000E+10&lt;/A&gt;\n&gt; &gt; &gt;            &lt;b&gt;-0.23000000000=\r\n000001&lt;/b&gt;\n&gt; &gt; &gt;            &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt; &gt;        =\r\n &lt;/Arrhenius&gt;\n&gt; &gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt; &gt;       &lt;reactants&gt;NH:1.0 NO:1&lt;/=\r\nreactants&gt;\n&gt; &gt; &gt;       &lt;products&gt;H:1 N2O:1.0&lt;/products&gt;\n&gt; &gt; &gt;     &lt;/reactio=\r\nn&gt;\n&gt; &gt; &gt; \n&gt; &gt; &gt; \n&gt; &gt; &gt; Second Reaction:\n&gt; &gt; &gt;     &lt;!-- reaction 0090    --&gt;=\r\n\n&gt; &gt; &gt;     &lt;reaction duplicate=3D&quot;yes&quot; reversible=3D&quot;yes&quot; id=3D&quot;0090&quot;&gt;\n&gt; &gt; =\r\n&gt;       &lt;equation&gt;NH2 + NO [=3D] N2 + H2O&lt;/equation&gt;\n&gt; &gt; &gt;       &lt;rateCoeff=\r\n&gt;\n&gt; &gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt; &gt;            &lt;A&gt;1.300000E+13&lt;/A&gt;\n&gt; &gt; &gt;     =\r\n       &lt;b&gt;-1.25&lt;/b&gt;\n&gt; &gt; &gt;            &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt; =\r\n&gt;         &lt;/Arrhenius&gt;\n&gt; &gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt; &gt;       &lt;reactants&gt;NO:1=\r\n NH2:1.0&lt;/reactants&gt;\n&gt; &gt; &gt;       &lt;products&gt;N2:1.0 H2O:1&lt;/products&gt;\n&gt; &gt; &gt;   =\r\n  &lt;/reaction&gt;\n&gt; &gt; &gt; \n&gt; &gt; &gt;     &lt;!-- reaction 0091    --&gt;\n&gt; &gt; &gt;     &lt;reactio=\r\nn duplicate=3D&quot;yes&quot; reversible=3D&quot;yes&quot; negative_A=3D&quot;yes&quot;\n&gt; &gt; id=3D&quot;0091&quot;&gt;\n=\r\n&gt; &gt; &gt;       &lt;equation&gt;NH2 + NO [=3D] N2 + H2O&lt;/equation&gt;\n&gt; &gt; &gt;       &lt;rateC=\r\noeff&gt;\n&gt; &gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt; &gt;            &lt;A&gt;-2.800000E+10&lt;/A&gt;\n&gt; &gt; &gt;=\r\n            &lt;b&gt;-0.55000000000000004&lt;/b&gt;\n&gt; &gt; &gt;            &lt;E units=3D&quot;cal/mo=\r\nl&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt; &gt;         &lt;/Arrhenius&gt;\n&gt; &gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt; &gt;  =\r\n     &lt;reactants&gt;NO:1 NH2:1.0&lt;/reactants&gt;\n&gt; &gt; &gt;       &lt;products&gt;N2:1.0 H2O:1=\r\n&lt;/products&gt;\n&gt; &gt; &gt;     &lt;/reaction&gt;\n&gt; &gt; &gt; \n&gt; &gt; &gt; As far as I can tell everyth=\r\ning has been converted correctly.  From \n&gt; &gt; &gt; what I have found by looking=\r\n around the available Cantera \n&gt; &gt; &gt; literature, the only way that a negati=\r\nve pre-exponential factor can \n&gt; &gt; &gt; be used inside Cantera is for it to be=\r\n declared as part of a \n&gt; &gt; &gt; duplicate reaction, be declared as having the=\r\n option negative_A, and\n&gt; \n&gt; &gt; &gt; have the total overall rate be positive.  =\r\nSomething is happening \n&gt; &gt; &gt; here though, as the even the rate coefficient=\r\ns are being returned as\n&gt; \n&gt; &gt; &gt; &quot;nan&quot; values.  This is consistent with bot=\r\nh the forward and reverse \n&gt; &gt; &gt; coefficients, and obviously the forward an=\r\nd reverse rates of \n&gt; &gt; &gt; progress.  Am I understanding all this correctly?=\r\n\n&gt; &gt; &gt; \n&gt; &gt; &gt; As far as I can tell, I&#39;m within the parameters set by Canter=\r\na to \n&gt; &gt; &gt; use negative pre-exponential factors, but I&#39;m getting these bog=\r\nus \n&gt; &gt; &gt; values in return, and am not sure (what to do)/(what to check) ne=\r\nxt.\n&gt; \n&gt; &gt; &gt; Do you know what might be wrong?  Is there something else that=\r\n I can\n&gt; \n&gt; &gt; &gt; check to make sure that I&#39;m doing things right?  Thanks.\n&gt; =\r\n&gt; &gt; \n&gt; &gt; &gt; Dan Smyth\n&gt; &gt; &gt;\n&gt; &gt;\n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; \n&gt; ------------------------=\r\n Yahoo! Groups Sponsor --------------------~--&gt;\n&gt; Something is new at Yahoo=\r\n! Groups.  Check out the enhanced email design.\n&gt; http://us.click.yahoo.com=\r\n/SISQkA/gOaOAA/yQLSAA/UGYolB/TM\n&gt; -----------------------------------------=\r\n---------------------------~-&gt; \n&gt; \n&gt;  \n&gt; Yahoo! Groups Links\n&gt;\n\n\n\n\n\n"}}