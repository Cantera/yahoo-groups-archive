{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":290820292,"authorName":"Daniele Chiappini","from":"Daniele Chiappini &lt;daniele.chiappini@...&gt;","profile":"dottorato82","replyTo":"LIST","senderId":"CnjTHOB3e2yUvMIlZk7k7pwfRC2nbZ5R_y74N6sQWo0P2xKWJfvKX1u6BOnAiNyVkegxOLeaBuu3Nu7SwJStAZm8yapmUUNy8h3CRF2EWj3tyBfAyRN5w7yY","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [cantera] Re: Problem with series adiabatic reactor","postDate":"1180013582","msgId":1656,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2NTU5NDBFLjgwNjA2QGZhc3R3ZWJuZXQuaXQ+","inReplyToHeader":"PEY3N0I3RjJDLTk5ODUtNEYwRi05MzlBLTgyQTVDNzRCMzY1QUBjYWx0ZWNoLmVkdT4=","referencesHeader":"PGYydnBhcit0YXAyQGVHcm91cHMuY29tPiA8NDY1NTREN0QuMzA3MDEwNEBmYXN0d2VibmV0Lml0PiA8Rjc3QjdGMkMtOTk4NS00RjBGLTkzOUEtODJBNUM3NEIzNjVBQGNhbHRlY2guZWR1Pg=="},"prevInTopic":1655,"nextInTopic":1658,"prevInTime":1655,"nextInTime":1657,"topicId":1642,"numMessagesInTopic":8,"msgSnippet":"... Dear prof. Goodwin, if it were possible, I would prefer using adiabatic reactors by this way I can study more deeply the heat exchange mechanism. I know","rawEmail":"Return-Path: &lt;daniele.chiappini@...&gt;\r\nX-Sender: daniele.chiappini@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 73254 invoked from network); 24 May 2007 13:32:54 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m43.grp.scd.yahoo.com with QMQP; 24 May 2007 13:32:54 -0000\r\nReceived: from unknown (HELO aa013msr.fastwebnet.it) (85.18.95.73)\n  by mta10.grp.scd.yahoo.com with SMTP; 24 May 2007 13:32:53 -0000\r\nReceived: from [192.168.1.125] (160.80.88.3) by aa013msr.fastwebnet.it (7.3.118.6) (authenticated as daniele.chiappini)\n        id 465166DE0035D97E for cantera@yahoogroups.com; Thu, 24 May 2007 15:32:42 +0200\r\nMessage-ID: &lt;4655940E.80606@...&gt;\r\nDate: Thu, 24 May 2007 15:33:02 +0200\r\nUser-Agent: Mozilla Thunderbird 1.5.0.9 (X11/20061206)\r\nMIME-Version: 1.0\r\nTo: cantera@yahoogroups.com\r\nReferences: &lt;f2vpar+tap2@...&gt; &lt;46554D7D.3070104@...&gt; &lt;F77B7F2C-9985-4F0F-939A-82A5C74B365A@...&gt;\r\nIn-Reply-To: &lt;F77B7F2C-9985-4F0F-939A-82A5C74B365A@...&gt;\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------000203040100060303050302&quot;\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Daniele Chiappini &lt;daniele.chiappini@...&gt;\r\nSubject: Re: [cantera] Re: Problem with series adiabatic reactor\r\nX-Yahoo-Group-Post: member; u=290820292; y=ELPaafGkIaZlGg8GByGorjjX-lUq4zq9_pivhpLBwUAppHHSEuE\r\nX-Yahoo-Profile: dottorato82\r\n\r\n\r\n--------------000203040100060303050302\r\nContent-Type: text/plain; charset=ISO-8859-15; format=flowed\r\nContent-Transfer-Encoding: 8bit\r\n\r\nDavid Goodwin ha scritto:\n&gt;\n&gt; Wouldn&#39;t it be simpler to just specify some heat transfer properties \n&gt; for the wall?\n&gt;\n&gt;\n&gt; I think if you manually change the gas state, then it might be \n&gt; necessary to start over, creating new reactor objects, etc., each \n&gt; time. Calling &quot;reinitialize&quot; (which simply calls the &quot;reinitialize&quot; \n&gt; procedure of the CVODE integrator) should work in principle, but in my \n&gt; experience it doesn&#39;t always.  \n&gt;\n&gt;\n&gt; Best wishes,\n&gt; Dave\n&gt;\n&gt;\n&gt; On May 24, 2007, at 1:31 AM, Daniele Chiappini wrote:\n&gt;\n&gt;&gt; avmokhov ha scritto:\n&gt;&gt;&gt;\n&gt;&gt;&gt; Daniele,\n&gt;&gt;&gt;\n&gt;&gt;&gt; It seems for me that the most probable reason for this behavior is\n&gt;&gt;&gt; that you changed the thermodynamic properties of some components in\n&gt;&gt;&gt; such a way that you actually have frozen your system. In other words,\n&gt;&gt;&gt; with new thermodynamic properties your system is already in\n&gt;&gt;&gt; equilibrium and therefore, does not change with time. To test this,\n&gt;&gt;&gt; try to change the thermodynamic properties very gradually and look\n&gt;&gt;&gt; what will happen. Other possibilities such as very small time step,\n&gt;&gt;&gt; wrong reinitialization of an object etc. could not be excluded though.\n&gt;&gt;&gt;\n&gt;&gt;&gt; Best regards, Anatoli.\n&gt;&gt;&gt;\n&gt;&gt;&gt; --- In cantera@yahoogroups.com &lt;mailto:cantera%40yahoogroups.com&gt;, \n&gt;&gt;&gt; &quot;dottorato82&quot; &lt;daniele.chiappini@...&gt;\n&gt;&gt;&gt; wrote:\n&gt;&gt;&gt; &gt;\n&gt;&gt;&gt; &gt; Hi to all,\n&gt;&gt;&gt; &gt; I would like to simulate a combustion process in a piston and I&#39;ve\n&gt;&gt;&gt; &gt; already simulated it like a reactor with a moving wall obtaining\n&gt;&gt;&gt; good\n&gt;&gt;&gt; &gt; results. However, I am now trying to simulate the combustion process\n&gt;&gt;&gt; &gt; with a series of adiabatic reactors because I need to do some\n&gt;&gt;&gt; &gt; operations on the thermodynamic properties between two timestps. At\n&gt;&gt;&gt; &gt; the end of every timestep I save variables like gas temperature,\n&gt;&gt;&gt; &gt; pressure and composition and, after doing what I need to do, I\n&gt;&gt;&gt; &gt; re-initialize a new reactor with the initial conditions which I&#39;ve\n&gt;&gt;&gt; &gt; computed. Doing it I&#39;ve encountered a big problem: the reactor\n&gt;&gt;&gt; afeter\n&gt;&gt;&gt; &gt; the first timesetp doesn&#39;t evaluate the chemestry in it. In other\n&gt;&gt;&gt; &gt; words it modifies the composition of the mixture only in the first\n&gt;&gt;&gt; &gt; timestep, during the others it doesn&#39;t do anything regarding the\n&gt;&gt;&gt; &gt; reactions in it so I cannot evaluate the correct behavior of the gas\n&gt;&gt;&gt; &gt; during the compression and expansion strokes.\n&gt;&gt;&gt; &gt; Somebody has ideas or suggestions about it?\n&gt;&gt;&gt; &gt; Thank you very much for your help and your willingness.\n&gt;&gt;&gt; &gt;\n&gt;&gt;&gt; &gt; Daniele\n&gt;&gt;&gt; &gt;\n&gt;&gt;&gt;\n&gt;&gt; Dear Anatoli,\n&gt;&gt;\n&gt;&gt; I think that I have to explain better my problem.  I would implement \n&gt;&gt; heat transfer in a simulation of a piston. I&#39;ve chosen to implement a \n&gt;&gt; reactor with constant volume and I simulate it in a ReactorNet  for \n&gt;&gt; every timestep. After every iteration I save the value of the \n&gt;&gt; composition and I operate on temperature and pressure levels. At the \n&gt;&gt; end I upgrade the gas state with the new value of temperature, \n&gt;&gt; pressure and composition. Of course I reinitialize the reactor and \n&gt;&gt; the reactornet with the instruction r.initialize()  and I change the \n&gt;&gt; volume of the reactor with the new one. The strange thing is that the \n&gt;&gt; reactor should solve evaluate the chemistry but it doesn&#39;t, I know \n&gt;&gt; that levels of temperature and pressure require these reactions.\n&gt;&gt; Thank you for your attention.\n&gt;&gt;\n&gt;&gt; Daniele\n&gt;\n&gt;  \n\nDear prof. Goodwin,\nif it were possible, I would prefer using adiabatic reactors by this way \nI can study more deeply the heat exchange mechanism. I know that this is \nmore complicated but I really appreciate if you can help me.\nThus I report some lines of my codes with the hope that these can help you.\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\nDEFINITION OF THE GAS AND OF THE REACTORNET\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\nIdealGasMix* gx;\ngx = new IdealGasMix(&quot;gri30.cti&quot;, &quot;gri30&quot;);\nIdealGasMix& gas = *gx;\n...\ngas.setState_TPX(temp, pres, X);\n\nReactor r;\nr.setThermoMgr(gas);\nr.setKineticsMgr(gas);\nr.setInitialVolume(cyl_vol);\n\nReactorNet* reac;\nreac = new ReactorNet;\nReactorNet& pist = *reac;\nReactorNet pist;\npist.addReactor(&r);\n\n...\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\nSIMULATION OF CYCLE\n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nfor (int i = 1; i &lt;= nsteps; i++) {\n         tm = i*dt;\n\n        gas.setState_TPY(T_new, P_new, Y_s);\n        pist.step(dt);\n\n        gas.getMassFractions(Y_s);\n        gas.getPartialMolarEnthalpies(enth_part);\n        gas.getMoleFractions(X_temp);\n\n        T_new = ...\n        P_new = ...\n\n        gx = new IdealGasMix(&quot;gri30.cti&quot;, &quot;gri30&quot;);\n        IdealGasMix& gas = *gx;\n        gas.setState_TPY(T_new, P_new, Y_s);\n\n        r.initialize();\n        r.insert(gas);\n        r.setThermoMgr(gas);\n        r.setKineticsMgr(gas);\n        r.setInitialVolume(cyl_vol_agg);\n\n        pist.initialize();\n        reac = new ReactorNet;\n        ReactorNet& pist = *reac;\n        pist.addReactor(&r);\n\n    }\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nWith this code I obtain following results:\n\n1000 --&gt; t = 0\n0 --&gt; Concentration x(t = 0)\n\n1000.05--&gt; t = dt\n3.13076e-23 --&gt; Concentration x(t = dt)\n\n1000.14--&gt; t = 2*dt\n3.13076e-23 --&gt; Concentration x(t = 2*dt)\n.....\n\nIn conclusion I can modify temperature and pressure levels but I haven&#39;t \nresults in term of chemistry reaction.\nHave I done errors in writing the code?\nThank you very much for your help and your willingness.\n\nDaniele\n\r\n--------------000203040100060303050302\r\nContent-Type: text/html; charset=ISO-8859-15\r\nContent-Transfer-Encoding: 8bit\r\n\r\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta content=&quot;text/html;charset=ISO-8859-15&quot;\n http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;\nDavid Goodwin ha scritto:\n&lt;blockquote cite=&quot;midF77B7F2C-9985-4F0F-939A-82A5C74B365A@...&quot;\n type=&quot;cite&quot;&gt;&lt;!-- Network content --&gt;\n\n  &lt;div id=&quot;ygrp-text&quot;&gt;\n  &lt;p&gt;Wouldn&#39;t it be simpler to just specify some heat transfer\nproperties for the wall?&lt;/p&gt;\n  &lt;div&gt;&lt;br class=&quot;khtml-block-placeholder&quot;&gt;\n  &lt;/div&gt;\n  &lt;div&gt;I think if you manually change the gas state, then it might be\nnecessary to start over, creating new reactor objects, etc., each time.\nCalling &quot;reinitialize&quot; (which simply calls the &quot;reinitialize&quot; procedure\nof the CVODE integrator) should work in principle, but in my experience\nit doesn&#39;t always.��&lt;/div&gt;\n  &lt;div&gt;&lt;br class=&quot;khtml-block-placeholder&quot;&gt;\n  &lt;/div&gt;\n  &lt;div&gt;&lt;br class=&quot;khtml-block-placeholder&quot;&gt;\n  &lt;/div&gt;\n  &lt;div&gt;Best wishes,&lt;/div&gt;\n  &lt;div&gt;Dave&lt;/div&gt;\n  &lt;div&gt;&lt;br class=&quot;khtml-block-placeholder&quot;&gt;\n  &lt;/div&gt;\n  &lt;div&gt;&lt;br&gt;\n  &lt;div&gt;\n  &lt;div&gt;On May 24, 2007, at 1:31 AM, Daniele Chiappini wrote:&lt;/div&gt;\n  &lt;br class=&quot;Apple-interchange-newline&quot;&gt;\n  &lt;blockquote type=&quot;cite&quot;&gt; avmokhov ha scritto:\n    &lt;blockquote cite=&quot;midf2vpar+tap2@...&quot; type=&quot;cite&quot;&gt;\n      &lt;div id=&quot;ygrp-text&quot;&gt;\n      &lt;p&gt;Daniele,&lt;br&gt;\n      &lt;br&gt;\nIt seems for me that the most probable reason for this behavior is &lt;br&gt;\nthat you changed the thermodynamic properties of some components in &lt;br&gt;\nsuch a way that you actually have frozen your system. In other words, &lt;br&gt;\nwith new thermodynamic properties your system is already in &lt;br&gt;\nequilibrium and therefore, does not change with time. To test this, &lt;br&gt;\ntry to change the thermodynamic properties very gradually and look &lt;br&gt;\nwhat will happen. Other possibilities such as very small time step, &lt;br&gt;\nwrong reinitialization of an object etc. could not be excluded though.&lt;br&gt;\n      &lt;br&gt;\nBest regards, Anatoli. &lt;br&gt;\n      &lt;br&gt;\n--- In &lt;a href=&quot;mailto:cantera%40yahoogroups.com&quot;&gt;cantera@yahoogroups&lt;wbr&gt;.com&lt;/a&gt;,\n&quot;dottorato82&quot; &lt;daniele.chiappini@&lt;wbr&gt;...&gt; &lt;br&gt;\nwrote:&lt;br&gt;\n&gt;&lt;br&gt;\n&gt; Hi to all,&lt;br&gt;\n&gt; I would like to simulate a combustion process in a piston and I&#39;ve&lt;br&gt;\n&gt; already simulated it like a reactor with a moving wall obtaining &lt;br&gt;\ngood&lt;br&gt;\n&gt; results. However, I am now trying to simulate the combustion\nprocess&lt;br&gt;\n&gt; with a series of adiabatic reactors because I need to do some&lt;br&gt;\n&gt; operations on the thermodynamic properties between two timestps. At&lt;br&gt;\n&gt; the end of every timestep I save variables like gas temperature,&lt;br&gt;\n&gt; pressure and composition and, after doing what I need to do, I&lt;br&gt;\n&gt; re-initialize a new reactor with the initial conditions which I&#39;ve&lt;br&gt;\n&gt; computed. Doing it I&#39;ve encountered a big problem: the reactor &lt;br&gt;\nafeter&lt;br&gt;\n&gt; the first timesetp doesn&#39;t evaluate the chemestry in it. In other&lt;br&gt;\n&gt; words it modifies the composition of the mixture only in the first&lt;br&gt;\n&gt; timestep, during the others it doesn&#39;t do anything regarding the&lt;br&gt;\n&gt; reactions in it so I cannot evaluate the correct behavior of the\ngas&lt;br&gt;\n&gt; during the compression and expansion strokes.&lt;br&gt;\n&gt; Somebody has ideas or suggestions about it?&lt;br&gt;\n&gt; Thank you very much for your help and your willingness.&lt;br&gt;\n&gt; &lt;br&gt;\n&gt; Daniele&lt;br&gt;\n&gt;&lt;br&gt;\n      &lt;br&gt;\n      &lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/blockquote&gt;\nDear Anatoli,&lt;br&gt;\n    &lt;br&gt;\nI think that I have to explain better my problem.� I would implement\nheat transfer in a simulation of a piston. I&#39;ve chosen to implement a\nreactor with constant volume and I simulate it in a ReactorNet� for\nevery timestep. After every iteration I save the value of the\ncomposition and I operate on temperature and pressure levels. At the\nend I upgrade the gas state with the new value of temperature, pressure\nand composition. Of course I reinitialize the reactor and the\nreactornet with the instruction r.initialize(&lt;wbr&gt;)� and I change the\nvolume of the reactor with the new one. The strange thing is that the\nreactor should solve evaluate the chemistry but it doesn&#39;t, I know that\nlevels of temperature and pressure require these reactions. &lt;br&gt;\nThank you for your attention.&lt;br&gt;\n    &lt;br&gt;\nDaniele&lt;br&gt;\n    &lt;span width=&quot;1&quot; style=&quot;color: white;&quot;&gt;&lt;/span&gt; &lt;/blockquote&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;/div&gt;\n  &lt;/div&gt;\n\n&lt;!--End group email --&gt;&lt;/blockquote&gt;\n&lt;br&gt;\nDear prof. Goodwin,&lt;br&gt;\nif it were possible, I would prefer using adiabatic reactors by this\nway I can study more deeply the heat exchange mechanism. I know that\nthis is more complicated but I really appreciate if you can help me.&lt;br&gt;\nThus I report some lines of my codes with the hope that these can help\nyou.&lt;br&gt;\n&lt;br&gt;\n---------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;\nDEFINITION OF THE GAS AND OF THE REACTORNET&lt;br&gt;\n---------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;\nIdealGasMix* gx;&lt;br&gt;\ngx = new IdealGasMix(&quot;gri30.cti&quot;, &quot;gri30&quot;);&lt;br&gt;\nIdealGasMix&amp; gas = *gx;&lt;br&gt;\n...&lt;br&gt;\ngas.setState_TPX(temp, pres, X);&lt;br&gt;\n&lt;br&gt;\nReactor r;&lt;br&gt;\nr.setThermoMgr(gas);&lt;br&gt;\nr.setKineticsMgr(gas);&lt;br&gt;\nr.setInitialVolume(cyl_vol);&lt;br&gt;\n&lt;br&gt;\nReactorNet* reac;&lt;br&gt;\nreac = new ReactorNet;&lt;br&gt;\nReactorNet&amp; pist = *reac;&lt;br&gt;\nReactorNet pist;&lt;br&gt;\npist.addReactor(&amp;r);&lt;br&gt;\n&lt;br&gt;\n...&lt;br&gt;\n&lt;br&gt;\n---------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;\nSIMULATION OF CYCLE&lt;br&gt;\n---------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;\n&lt;br&gt;\nfor (int i = 1; i &lt;= nsteps; i++) {&lt;br&gt;\n�������� tm = i*dt;&lt;br&gt;\n&lt;br&gt;\n��� ��� gas.setState_TPY(T_new, P_new, Y_s);&lt;br&gt;\n��� ��� pist.step(dt);&lt;br&gt;\n&lt;br&gt;\n��� ��� gas.getMassFractions(Y_s);&lt;br&gt;\n��� ��� gas.getPartialMolarEnthalpies(enth_part);&lt;br&gt;\n��� ��� gas.getMoleFractions(X_temp);&lt;br&gt;\n&lt;br&gt;\n������� T_new = ...&lt;br&gt;\n������� P_new = ...&lt;br&gt;\n&lt;br&gt;\n��� ��� gx = new IdealGasMix(&quot;gri30.cti&quot;, &quot;gri30&quot;);&lt;br&gt;\n��� ��� IdealGasMix&amp; gas = *gx;&lt;br&gt;\n��� ��� gas.setState_TPY(T_new, P_new, Y_s);&lt;br&gt;\n&lt;br&gt;\n��� ��� r.initialize();&lt;br&gt;\n��� ��� r.insert(gas);&lt;br&gt;\n������� r.setThermoMgr(gas);&lt;br&gt;\n������� r.setKineticsMgr(gas);&lt;br&gt;\n��� ��� r.setInitialVolume(cyl_vol_agg);&lt;br&gt;\n&lt;br&gt;\n��� ��� pist.initialize();&lt;br&gt;\n��� ��� reac = new ReactorNet;&lt;br&gt;\n��� ��� ReactorNet&amp; pist = *reac;&lt;br&gt;\n��� ��� pist.addReactor(&amp;r);&lt;br&gt;\n&lt;br&gt;\n��� }&lt;br&gt;\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;\n&lt;br&gt;\nWith this code I obtain following results:&lt;br&gt;\n&lt;br&gt;\n1000 --&gt; t = 0&lt;br&gt;\n0 --&gt; Concentration x(t = 0)&lt;br&gt;\n&lt;br&gt;\n1000.05--&gt; t = dt&lt;br&gt;\n3.13076e-23 --&gt; Concentration x(t = dt)&lt;br&gt;\n&lt;br&gt;\n1000.14--&gt; t = 2*dt&lt;br&gt;\n3.13076e-23 --&gt; Concentration x(t = 2*dt)&lt;br&gt;\n.....&lt;br&gt;\n&lt;br&gt;\nIn conclusion I can modify temperature and pressure levels but I\nhaven&#39;t results in term of chemistry reaction.&lt;br&gt;\nHave I done errors in writing the code? &lt;br&gt;\nThank you very much for your help and your willingness.&lt;br&gt;\n&lt;br&gt;\nDaniele&lt;br&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------000203040100060303050302--\r\n\n"}}