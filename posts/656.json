{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":44728387,"authorName":"David Goodwin","from":"David Goodwin &lt;dgoodwin@...&gt;","profile":"dggoodwin","replyTo":"LIST","senderId":"zqjbsQttZ7_LulHu6YWtmhsyhd60dCpj0e6IIunju_X_VjuboGBD-hlQWhUyZnVE1gFqqxZ72CFMAxbEITMdu2HkPype31s7q9fu","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [cantera] memory leak","postDate":"1104982077","msgId":656,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEY1QzE4RUE3LTVGOTItMTFEOS1CNjMzLTAwMEQ5M0FFMjQxQUBjYWx0ZWNoLmVkdT4=","inReplyToHeader":"PGNyZ3A2NytqdDVmQGVHcm91cHMuY29tPg==","referencesHeader":"PGNyZ3A2NytqdDVmQGVHcm91cHMuY29tPg=="},"prevInTopic":655,"nextInTopic":657,"prevInTime":655,"nextInTime":657,"topicId":646,"numMessagesInTopic":5,"msgSnippet":"There may still be some memory leaks in Cantera that only show up in very long runs (of Fluent for example).  I ll see if I can find anything leaking related","rawEmail":"Return-Path: &lt;dgoodwin@...&gt;\r\nX-Sender: dgoodwin@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 80140 invoked from network); 6 Jan 2005 03:37:17 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m25.grp.scd.yahoo.com with QMQP; 6 Jan 2005 03:37:17 -0000\r\nReceived: from unknown (HELO outgoing-mail.its.caltech.edu) (131.215.49.69)\n  by mta1.grp.scd.yahoo.com with SMTP; 6 Jan 2005 03:37:17 -0000\r\nReceived: from water-dog (water-dog [192.168.1.26])\n\tby water-ox-postvirus (Postfix) with ESMTP id 3B53326AEAF\n\tfor &lt;cantera@yahoogroups.com&gt;; Wed,  5 Jan 2005 19:37:15 -0800 (PST)\r\nReceived: from earth-ox ([192.168.1.9])\n\tby water-dog (MailMonitor for SMTP v1.2.2 ) ;\n\tWed, 5 Jan 2005 19:27:59 -0800 (PST)\r\nReceived: from [10.0.1.2] (charter-241-015.caltech.edu [131.215.241.15])\n\tby earth-ox.its.caltech.edu (Postfix) with ESMTP id 0EB4B109BFB\n\tfor &lt;cantera@yahoogroups.com&gt;; Wed,  5 Jan 2005 19:27:59 -0800 (PST)\r\nMime-Version: 1.0 (Apple Message framework v619)\r\nIn-Reply-To: &lt;crgp67+jt5f@...&gt;\r\nReferences: &lt;crgp67+jt5f@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed\r\nMessage-Id: &lt;F5C18EA7-5F92-11D9-B633-000D93AE241A@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Wed, 5 Jan 2005 19:27:57 -0800\r\nTo: cantera@yahoogroups.com\r\nX-Mailer: Apple Mail (2.619)\r\nX-Spam-Status: No, hits=0.0 tagged_above=-100000.0 required=5.0 \r\nX-Spam-Level: \r\nX-eGroups-Remote-IP: 131.215.49.69\r\nFrom: David Goodwin &lt;dgoodwin@...&gt;\r\nSubject: Re: [cantera] memory leak\r\nX-Yahoo-Group-Post: member; u=44728387\r\nX-Yahoo-Profile: dggoodwin\r\n\r\nThere may still be some memory leaks in Cantera that only show up in \nvery long runs (of Fluent for example).  I&#39;ll see if I can find \nanything leaking related to the Reactor class.\n\nBut for MATLAB/Cantera users, there is a bigger problem.  When a user \ncreates a new instance of a Cantera MATLAB class (for example, a new \nReactor object), a new Cantera &quot;kernel&quot; object is created (an instance \nof a C++ Cantera class), and the MATLAB object is really just a facade \nfor the underlying kernel object.  The problem is when the object is \nassigned to something else:\n\nr = Reactor(gas);\n...\nr = Reactor(gas);\n\nWhen the second &#39;Reactor&#39; statement is encountered, MATLAB frees the \ncontents of &#39;r&#39; that it knows about. The problem is, it doesn&#39;t know \nabout the Cantera kernel object that was created in the first &#39;Reactor&#39; \nstatement, and can&#39;t release its memory.  This same problem occurs when \n&#39;clear&#39; is called.\n\nNow in Python, it is possible to define a class method that gets called \nwhenever a Python class instance is about to be deleted (method \n&#39;__del__&#39;).  This is used to automatically delete the kernel object \nwhenever the Python object is deleted.\n\nBut as far as I can tell, MATLAB doesn&#39;t have this capability. No \nuser-defined function is invoked when a MATLAB object is destroyed.  So \nthere is no way to transparently delete the kernel object.  As a \npartial fix, I added function &#39;cleanup&#39; to delete ALL Cantera kernel \nobjects.  But be aware that this deletes the kernel objects but not the \nMATLAB objects (which only MATLAB, not Cantera, can do).  So &#39;cleanup&#39; \nshould usually only be called in conjunction with clearing every \nCantera object from the MATLAB workspace.\n\nIf anyone knows of a way to call a user-defined function or class \nmethod whenever MATLAB destroys (i.e. clears) an object, this problem \ncan be fixed. Otherwise, I can only suggest using Python instead of \nMATLAB if this continues to be a problem.\n\nDave\n\n\n\n\nOn Jan 5, 2005, at 5:13 AM, albrechtheinzel wrote:\n\n&gt;\n&gt;\n&gt; Dear Harry,\n&gt; I&#39;m writing because I have some question concerning the memory leak\n&gt; issue that was discussed in this forum a few days ago.\n&gt; First let me describe what I use Cantera for. I do some transient\n&gt; reactor network simulation in Matlab. During the simulations I need\n&gt; to change the configuration of the reactor network several times.\n&gt; Therefore I delete the network object from the Matlab workspace and\n&gt; than I recreate the modified one. But after a while I run out of\n&gt; memory. The commands cleanup, clear and so don&#39;t affect anything.\n&gt; Only finishing the entire Matlab helps.\n&gt; So far I couldn&#39;t localize the reason for this, is it Matlab or is it\n&gt; something in the Cantera library. (By the way I download the cantera\n&gt; binary and I&#39;m not so familiar in debugging).\n&gt; But recently I read this email of Martin Olausson and your answer\n&gt; with recommendation to use the program appdelete() in misc.cpp. Can\n&gt; you tell me how I have to use it through the matlab interface. Which\n&gt; steps are there required?\n&gt; Thank you very much.\n&gt;   Regards\n&gt;      Albrecht\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n\n"}}