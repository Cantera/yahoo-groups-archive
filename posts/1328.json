{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":32942367,"authorName":"Moffat, Harry K","from":"&quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;","profile":"hkmoffat","replyTo":"LIST","senderId":"1LTTgH9I1AkSkjdZdoQWBPaQNcN6Wg4LAZkICJmJHpCLnLe5yZp9pbH0hz0-CypCRakLoKDnq_-pDkfOQ8CsLwSKU-IPoahMlH7aBMA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RE: [cantera] Re: Fortran - problem with meanmolarmass()","postDate":"1159910967","msgId":1328,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNBQ0M3ODk3QTk0NjMxNDFCRTBEOTM4RkMzMURGRDE5MDIyMUIxRjdARVMyMlNOTE5ULnNybi5zYW5kaWEuZ292Pg=="},"prevInTopic":1327,"nextInTopic":1336,"prevInTime":1327,"nextInTime":1329,"topicId":1314,"numMessagesInTopic":7,"msgSnippet":"Hi Mike, When I ran your program, adding the line double precision meanMolarMass, intEnergy_mass I obtained: 28.8507043 -84549.2746 That must mean there is an","rawEmail":"Return-Path: &lt;hkmoffa@...&gt;\r\nX-Sender: hkmoffa@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 67105 invoked from network); 3 Oct 2006 21:31:18 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m40.grp.scd.yahoo.com with QMQP; 3 Oct 2006 21:31:18 -0000\r\nReceived: from unknown (HELO sentry.sandia.gov) (132.175.109.20)\n  by mta3.grp.scd.yahoo.com with SMTP; 3 Oct 2006 21:31:18 -0000\r\nReceived: from 132.175.109.1 by sentry.sandia.gov with ESMTP (Tumbleweed\n MMS SMTP Relay 01 (Email Firewall v6.2.2)); Tue, 03 Oct 2006 15:30:21\n -0600\r\nX-Server-Uuid: BB80EF77-0F08-4144-BAFD-CF7C62507341\r\nReceived: from ES23SNLNT.srn.sandia.gov (ec04snlnt.sandia.gov\n [134.253.164.156] (may be forged)) by mailgate.sandia.gov (\n 8.13.6/8.13.6) with ESMTP id k93LTp3f020347 for\n &lt;cantera@yahoogroups.com&gt;; Tue, 3 Oct 2006 15:30:16 -0600 (MDT)\r\nReceived: from ES22SNLNT.srn.sandia.gov ([134.253.164.158]) by\n ES23SNLNT.srn.sandia.gov with Microsoft SMTPSVC(6.0.3790.1830); Tue, 3\n Oct 2006 15:29:28 -0600\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nDate: Tue, 3 Oct 2006 15:29:27 -0600\r\nMessage-ID: &lt;3ACC7897A9463141BE0D938FC31DFD190221B1F7@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [cantera] Re: Fortran - problem with meanmolarmass()\r\nThread-Index: AcbnLCH+6Vifeo5pTOyVDJFI2fIf7AABjFQA\r\nTo: cantera@yahoogroups.com\r\nX-OriginalArrivalTime: 03 Oct 2006 21:29:28.0323 (UTC)\n FILETIME=[019FB530:01C6E733]\r\nX-TMWD-Spam-Summary: TS=20061003213022; SEV=2.0.2; DFV=A2006100308;\n IFV=2.0.4,4.0-8; RPD=4.00.0004; ENG=IBF; RPDID=NA; CAT=NONE; CON=NONE\r\nX-MMS-Spam-Filter-ID: A2006100308_4.00.0004_4.0-8\r\nX-WSS-ID: 693C09E12IO6020232-01-01\r\nContent-Type: text/plain;\n charset=us-ascii\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: &quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;\r\nSubject: RE: [cantera] Re: Fortran - problem with meanmolarmass()\r\nX-Yahoo-Group-Post: member; u=32942367; y=4LfJEJHrFUXgZ-EtuPU_tDmBMhZmSzXQJXGuQpbIf90qGIo\r\nX-Yahoo-Profile: hkmoffat\r\n\r\nHi Mike,\n\n   When I ran your program, adding the line\n      double precisio=\r\nn meanMolarMass, intEnergy_mass\n\nI obtained:\n      28.8507043\n      -84549.=\r\n2746 \n\nThat must mean there is an issue with your installation, or the make=\r\n,\nmake install process didn&#39;t wipe out the old files.\n\nBest wishes,\nHarry\n\n=\r\n\nHarry Moffat                                             (w) (505)\n844-691=\r\n2\nMultiphase Transport Processes Division    (f)   (505) 844-9297\nSandia Na=\r\ntional Laboratories\nhkmoffa@...\nP. O. Box 5800-0834\nAlbuquerque, NM =\r\n87185-0834\n\n-----Original Message-----\nFrom: cantera@yahoogroups.com [mailt=\r\no:cantera@yahoogroups.com] On Behalf\nOf Michael Johnson\nSent: Tuesday, Octo=\r\nber 03, 2006 2:33 PM\nTo: cantera@yahoogroups.com\nSubject: Re: [cantera] Re:=\r\n Fortran - problem with meanmolarmass()\n\nHi Harry and Dan,\n\nI checked out a=\r\nnd built Cantera from CVS today, but am still getting\nvery strange results =\r\nfrom a simple Fortran example problem:\n\n       PROGRAM CANTERATEST\n       I=\r\nMPLICIT DOUBLE PRECISION (A-H,O-Z)\n       dimension Y(53)\n\n       DO 10 I=\r\n=3D1,53\n             Y(I) =3D 0.0\n  10   CONTINUE\n\n       p =3D 101325.0\n  =\r\n     t =3D 300.0\n       Y(4) =3D 0.233\n       Y(48) =3D 0.767\n\n       call =\r\nnewIdealGasMix(&#39;gri30.cti&#39;,&#39;gri30_mix&#39;,&#39;Mix&#39;)\n       call setState_TPY(t,p,=\r\nY)\n\n       WRITE(*,30) meanMolarMass()\n       WRITE(*,30) intEnergy_mass()\n=\r\n\n  30   format(E16.8)\n       STOP\n       END\n\nThis program returns the foll=\r\nowing values:\n    .00000000E+00\n    .45969286E-33\n\nI compiled demo_ftnlib.c=\r\npp and my example program file the same way they\nare done for the demo.f pr=\r\nogram included in the distribution\n(/usr/local/cantera/templates/f77/), whi=\r\nch on my system looks like this:\n\ng++ -c demo_ftnlib.cpp -I/usr/local/cante=\r\nra/include -O3 -Wall\ng77 -c canteratest.f -O3  -fno-second-underscore\ng++ -=\r\no test canteratest.o demo_ftnlib.o -L/usr/local/cantera/lib\n-L/usr/local/li=\r\nb    -luser -loneD -lzeroD -ltransport -lcantera \n-lsundials_cvodes -lsundi=\r\nals_nvecserial -lctlapack -lctblas -lctmath\n-ltpx -lctf2c -lconverters -lct=\r\ncxx  -L/usr/local/lib\n-L/usr/lib/gcc-lib/i586-suse-linux/3.3.4\n-L/usr/lib/g=\r\ncc-lib/i586-suse-linux/3.3.4/../../../../i586-suse-linux/lib\n-L/usr/lib/gcc=\r\n-lib/i586-suse-linux/3.3.4/../../.. -lfrtbegin -lg2c -lm\n-lgcc_s\n\n\nWhy woul=\r\nd meanMolarMass() and intEnergy_mass() be returning such bogus\nnumbers?\nTha=\r\nnks,\nMichael\n\n\n\nMoffat, Harry K wrote:\n&gt; \n&gt; \n&gt; Hi Dan,\n&gt; \n&gt; I have fixed on=\r\ne aspect of this problem within the CVS code.\nPreviously,\n&gt; after initializ=\r\nation, if the mole or mass fractions were not set in\nthe\n&gt; CTI or CTML file=\r\n within the state XML block, the ThermoPhase object\n&gt; would have its mass f=\r\nraction vector come back from initialization with\n&gt; it all set to zeroes. T=\r\nherefore, the mean molecular weight would\nreturn\n&gt; a zero value, until the =\r\nsetstate_TPX() or setstate_TPY() routines were\n&gt; called.\n&gt; \n&gt; I just commit=\r\nted a change to the CVS repository so that species #0\nwill\n&gt; have its mass =\r\nfraction set to 1.0 at initialization but before Cantera\n&gt; handles the stat=\r\ne XML block information. Therefore, the mass fraction\n&gt; vector should sum t=\r\no one from the get-go.\n&gt; \n&gt; I hope the problems you are seeing will be fixe=\r\nd by this. However, I\n&gt; would be very interested to know if this is not the=\r\n case.\n&gt; meanMolarMass() is just a wrapper around the kernel routine,\n&gt; Sta=\r\nte::meanMolecularWeight(), in the State object. Cantera&#39;s\nindependent\n&gt; var=\r\niables are density, temperature, and the mass fraction vector. The\n&gt; mean m=\r\nolecular weight is calculated whenever the mass fraction vector\nis\n&gt; change=\r\nd. Then, the meanMolecularWeight() function just reports the\n&gt; number. Sett=\r\ning the temperature or the density (or equivalently the\n&gt; pressure) shouldn=\r\n&#39;t affect the internally calculated\nmeanMolecularWeight\n&gt; value.\n&gt; \n&gt; Best =\r\nwishes,\n&gt; Harry\n&gt; \n&gt; Harry Moffat (w) (505)\n&gt; 844-6912\n&gt; Multiphase Transpo=\r\nrt Processes Division (f) (505) 844-9297\n&gt; Sandia National Laboratories\n&gt; h=\r\nkmoffa@... &lt;mailto:hkmoffa%40sandia.gov&gt;\n&gt; P. O. Box 5800-0834\n&gt; Alb=\r\nuquerque, NM 87185-0834\n&gt; \n&gt; -----Original Message-----\n&gt; From: cantera@yah=\r\noogroups.com &lt;mailto:cantera%40yahoogroups.com&gt; \n&gt; [mailto:cantera@yahoogro=\r\nups.com &lt;mailto:cantera%40yahoogroups.com&gt;] On\n\n&gt; Behalf\n&gt; Of Dan Smyth\n&gt; S=\r\nent: Friday, September 29, 2006 4:08 PM\n&gt; To: cantera@yahoogroups.com &lt;mail=\r\nto:cantera%40yahoogroups.com&gt;\n&gt; Subject: [cantera] Re: Fortran - problem wi=\r\nth meanmolarmass()\n&gt; \n&gt; Hey Michael,\n&gt; \n&gt; An associate and I are trying to =\r\nreplace Chemkin calls, within a\n&gt; developed Fortran code, with Cantera call=\r\ns through the demo_lib.cpp\n&gt; interface as a guide. We have been having some=\r\n trouble with the\n&gt; meanmolarmass() call. Sometimes it will work and other =\r\ntimes it will\n&gt; not. (When it will not work, the code will return a segment=\r\nation fault\n&gt; within our Fortran code when the value returned is printed ou=\r\nt).\n&gt; We are guessing at this point that there is some conflict that we hav=\r\ne\n&gt; not found yet that makes this call work intermittently. It does work\nat=\r\n\n&gt; points in our code though, and so we think that this is a coding issue\n&gt;=\r\n on our side and not a Cantera issue.\n&gt; \n&gt; Dan Smyth\n&gt; \n&gt; --- In cantera@ya=\r\nhoogroups.com &lt;mailto:cantera%40yahoogroups.com&gt;, \n&gt; Michael Johnson &lt;johns=\r\n3c@...&gt; wrote:\n&gt;  &gt;\n&gt;  &gt; Dear Cantera group,\n&gt;  &gt;\n&gt;  &gt; I am working on chan=\r\nnel-flow simulations with DASSL, coupled to\n&gt; Cantera.\n&gt;  &gt; The command mea=\r\nnmolarmass() returns a value of 0.0000E+00 but if I\n&gt;  &gt; take the ratio of,=\r\n say, cp_mole()/cp_mass() it does return the\nproper\n&gt; value.\n&gt;  &gt;\n&gt;  &gt; I&#39;m =\r\nrunning on Linux, using the demo_ftnlib.cpp provided with the\n&gt; source\n&gt;  &gt;=\r\n code. I have looked through the header files under\n&gt;  &gt; /usr/local/include=\r\n/cantera but have been unable to find where\n&gt;  &gt; meanMolecularWeight() is d=\r\nefined. It is certainly used to calculate\n&gt;  &gt; molar properties with no pro=\r\nblem, but I can&#39;t figure out why\n&gt;  &gt; meanmolarmass() is not giving the pro=\r\nper value.\n&gt;  &gt;\n&gt;  &gt; Is anyone out there using Cantera in Fortran?\n&gt;  &gt; Tha=\r\nnks,\n&gt;  &gt; Michael\n&gt;  &gt;\n&gt; \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n\n\n \nYahoo! Groups Lin=\r\nks\n\n\n\n\n\n\n \n\n\n\n\n\n"}}