{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":300436692,"authorName":"ds2taieb","from":"&quot;ds2taieb&quot; &lt;ds2taieb@...&gt;","profile":"ds2taieb","replyTo":"LIST","senderId":"mDRgR3RxSjngxD9LzQCn_UTtyWeeot5ZyVtS8o81JVIeYWZXmt9gnW-AOKIh0iAe92qnjs77eMvL0w1jEkIm5KvZM74","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: generation of FPI tables with Cantera","postDate":"1180441823","msgId":1669,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGYzaDZjdis1MmQ3QGVHcm91cHMuY29tPg==","inReplyToHeader":"PDAxNDEwMWM3NWNlNiRjNTQzMTVkMCQ2YTAxYThjMEBLTlVUSD4="},"prevInTopic":1539,"nextInTopic":1672,"prevInTime":1668,"nextInTime":1670,"topicId":1530,"numMessagesInTopic":7,"msgSnippet":"Hello, I have successfully (but with some difficulties) simulated flames with heat losses. And when the flow rate is high, the flame is near the adiabatic. So","rawEmail":"Return-Path: &lt;ds2taieb@...&gt;\r\nReceived: (qmail 25696 invoked from network); 29 May 2007 15:30:15 -0000\r\nReceived: from unknown (66.218.66.68)\n  by m42.grp.scd.yahoo.com with QMQP; 29 May 2007 15:30:15 -0000\r\nReceived: from unknown (HELO n13c.bullet.sp1.yahoo.com) (69.147.64.114)\n  by mta11.grp.scd.yahoo.com with SMTP; 29 May 2007 15:30:15 -0000\r\nReceived: from [216.252.122.217] by n13.bullet.sp1.yahoo.com with NNFMP; 29 May 2007 15:29:52 -0000\r\nReceived: from [66.218.69.4] by t2.bullet.sp1.yahoo.com with NNFMP; 29 May 2007 15:29:52 -0000\r\nReceived: from [66.218.66.82] by t4.bullet.scd.yahoo.com with NNFMP; 29 May 2007 15:29:52 -0000\r\nX-Sender: ds2taieb@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 66132 invoked from network); 29 May 2007 12:32:34 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m50.grp.scd.yahoo.com with QMQP; 29 May 2007 12:32:34 -0000\r\nReceived: from unknown (HELO n8c.bullet.sp1.yahoo.com) (69.147.64.170)\n  by mta5.grp.scd.yahoo.com with SMTP; 29 May 2007 12:32:34 -0000\r\nReceived: from [216.252.122.218] by n8.bullet.sp1.yahoo.com with NNFMP; 29 May 2007 12:30:24 -0000\r\nReceived: from [66.218.69.1] by t3.bullet.sp1.yahoo.com with NNFMP; 29 May 2007 12:30:24 -0000\r\nReceived: from [66.218.66.91] by t1.bullet.scd.yahoo.com with NNFMP; 29 May 2007 12:30:24 -0000\r\nDate: Tue, 29 May 2007 12:30:23 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;f3h6cv+52d7@...&gt;\r\nIn-Reply-To: &lt;014101c75ce6$c54315d0$6a01a8c0@KNUTH&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;ds2taieb&quot; &lt;ds2taieb@...&gt;\r\nSubject: Re: generation of FPI tables with Cantera\r\nX-Yahoo-Group-Post: member; u=300436692; y=UoxpRne6Uq2s_CtItYVSQb-8xO0plcm15UFJp0jF0sO3Fgk\r\nX-Yahoo-Profile: ds2taieb\r\nX-eGroups-Approved-By: dggoodwin &lt;dgoodwin@...&gt; via web; 29 May 2007 15:29:50 -0000\r\n\r\nHello,\n\nI have successfully (but with some difficulties) simulated flames \n=\r\nwith heat losses. And when the flow rate is high, the flame is near \nthe ad=\r\niabatic. So to extrapolate my base to the entirely range of \nequivalence ra=\r\ntio, I want to simulate adiabatic flames. Then I have \nmodified the demo fi=\r\nle &#39;adiabtic file.py&#39; like follow:\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=\r\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=\r\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;\n\n#\n# ADIABATIC_FLAME - A freely-propagating, premi=\r\nxed methane/air flat\n#          flame with multicomponent transport propert=\r\nies\n#\nfrom Cantera import *\nfrom Cantera.OneD import *\nfrom Cantera.OneD.Fr=\r\neeFlame import FreeFlame\n\n#################################################=\r\n###############\n#\n# parameter values\n#\np          =3D   OneAtm             =\r\n  # pressure\ntin        =3D   298.0                # unburned gas temperatu=\r\nre\nmdot       =3D   2       # kg/m^2/s\nn_proj=3D20\n  # premixed gas composi=\r\ntion\n\ninitial_grid =3D\n[0.0,0.001,0.002,0.003,0.004,0.005,0.006,0.007,0.008=\r\n,0.009,0.0099,0.0\n1]  # m\n\ntol_ss    =3D [1.0e-3, 1.0e-2]        # [rtol at=\r\nol] for steady-state\n                                    # problem\ntol_ts  =\r\n  =3D [1.0e-3, 1.0e-2]        # [rtol atol] for time stepping\n\nloglevel  =\r\n=3D 1                       # amount of diagnostic output (0\n              =\r\n                      # to 5)\n\t\t\t\t    \nrefine_grid =3D 1                   =\r\n  # 1 to enable refinement, 0 to\n                                    # disa=\r\nble \t\t\t\n\t   \n\n\ngas =3D GRI30(&#39;Mix&#39;)\ngas.addTransportModel(&#39;Multi&#39;)\ninit_ric=\r\nh=3D0\nincr=3D1\nperiod=3D2\n\nfor i in range(init_rich,200):\n    rich=3D1+i*0.=\r\n01\n    fuel=3Drich/2\n    print &#39; CALCUL =E0  rich =3D %1.3g &#39; %(rich)\n    c=\r\nomp       =3D  &#39;CH4:%1.3g, O2:1, N2:3.76&#39; %(fuel)\n\n#  projection of the pre=\r\nvious simualted flame  \n    if incr=3D=3Dperiod:\n        init_rich=3Di\n    =\r\n    incr=3D0\n\n    if i=3D=3Dinit_rich:\n        gas.setState_TPX(tin, p, com=\r\np)\n        f =3D FreeFlame(gas =3D gas, grid =3D initial_grid, tfix =3D 600=\r\n.0)\n        # set the upstream properties \n        f.inlet.set(mole_fractio=\r\nns =3D comp, temperature =3D tin)\n    else:\n        gas.setState_TP(tin,p)\n=\r\n        \n        z_p=3Dzeros(n_proj,type=3D&#39;Float32&#39;)\n        z_p[0]=3D0\n  =\r\n      z_p[n_proj-1]=3D0.01\n        for k in range(n_proj-2):\n            z_=\r\np[k+1]=3D0.001+k*0.0089/(n_proj-3)\n            \n        f=3DFreeFlame(gas=\r\n=3Dgas, grid=3Dz_p, tfix =3D 600.0)\n            # set the upstream properti=\r\nes \n        f.inlet.set(mole_fractions =3D comp, temperature =3D tin)\n\n\n#pr=\r\nojection des profils pr=E9c=E9dents sur le maillage n_proj\n        prof_T_p=\r\n=3Dzeros(n_proj,type=3D&#39;Float32&#39;)\n        prof_u_p=3Dzeros(n_proj,type=3D&#39;F=\r\nloat32&#39;)\n        prof_V_p=3Dzeros(n_proj,type=3D&#39;Float32&#39;)\n        prof_H_p=\r\n=3Dzeros(n_proj,type=3D&#39;Float32&#39;)\n        rho_p=3Dzeros(n_proj,type=3D&#39;Floa=\r\nt32&#39;)\n        MF_p=3Dzeros([gas.nSpecies(),n_proj],type=3D&#39;Float32&#39;)\n      =\r\n  nb=3Df.flame.nPoints()\n        for k in range(n_proj):\n            for l =\r\nin range(nb-1):\n                if z[l+1]&gt;=3Dz_p[k]:\n                    if=\r\n z[l]&lt;=3Dz_p[k]:\n                        a=3Dz[l+1]-z_p[k]\n                =\r\n        e=3Dz[l+1]-z[l]\n                        prof_T_p[k]=3D(a*prof_T[l]+=\r\n(e-a)*prof_T[l+1])/e\n                        prof_u_p[k]=3D(a*prof_u[l]+(e-=\r\na)*prof_u[l+1])/e\n                        prof_V_p[k]=3D(a*prof_V[l]+(e-a)*=\r\nprof_V[l+1])/e\n                        prof_H_p[k]=3D(a*prof_H[l]+(e-a)*pro=\r\nf_H[l+1])/e\n                        rho_p[k]=3D(a*rho[l]+(e-a)*rho[l+1])/e\n=\r\n                        for r in range(gas.nSpecies()):\n                   =\r\n         MF_p[r][k]=3D(a*MF[r][l]+(e-a)*MF[r]\n[l+1])/e\n            \n# mise =\r\nen place des profils projet=E9s\n        list_dom=3Dzeros(n_proj,type=3D&#39;Flo=\r\nat32&#39;)\n        for k in range(n_proj):\n                adim=3Dfloat(z_p[k])=\r\n*float(100)\n                list_dom[k]=3Dadim\n\n            \n        f.setP=\r\nrofile(&#39;T&#39;,list_dom,prof_T_p)\n        f.setProfile(&#39;u&#39;,list_dom,prof_u_p)\n =\r\n       f.setProfile(&#39;V&#39;,list_dom,prof_V_p)\n        f.setProfile(&#39;H&#39;,list_do=\r\nm,prof_H_p)\n            \n        MF_p[gas.speciesIndex(&#39;CH4&#39;)][0]=3Dfuel\n  =\r\n      for l in range(gas.nSpecies()):\n            f.setProfile(gas.speciesN=\r\name(l),list_dom,MF_p[l])\n\n        for l in range(n_proj):\n            f.set=\r\nGasState(l)\n            gas.setDensity(rho_p[l])\n\n            f.setGasState=\r\n(0)\n\n\n    f.set(tol =3D tol_ss, tol_time =3D tol_ts)\n\n\n    f.set(energy =3D=\r\n &#39;off&#39;)\n    f.setRefineCriteria(ratio =3D 5.0, slope =3D 0.2, curve =3D \n0.=\r\n4,prune=3D0.01)\n    f.setMaxJacAge(50, 50)\n    f.setTimeStep(1.0e-3, [1,2,3=\r\n,4,5,6,7,8,9,10])\n    f.solve(loglevel, refine_grid)\n\n    f.set(energy =3D =\r\n&#39;on&#39;)\n    f.setRefineCriteria(ratio =3D 3.0, slope =3D 0.1, curve =3D \n0.2,=\r\nprune=3D0.015)\n    f.solve(loglevel, refine_grid)\n\n    gas.switchTransportM=\r\nodel(&#39;Multi&#39;)\n    f.flame.setTransportModel(gas)\n    f.solve(loglevel, refi=\r\nne_grid)\n\n    # write the velocity, temperature, density, and mole fraction=\r\ns \nto a CSV file\n    z =3D f.flame.grid()\n    T =3D f.T()\n    u =3D f.u()\n =\r\n   V =3D f.V()\n    \n    f.setGasState(0)\n\n    filename=3D&#39;adiabatic_flame-r=\r\nich=3D%1.4g.csv&#39; %(rich)\n    fcsv =3D open(filename,&#39;w&#39;)\n    writeCSV(fcsv,=\r\n[f.flame.nPoints(),gas.enthalpy_mass()])\n    #writeCSV(fcsv, [&#39;z (m)&#39;, &#39;u (=\r\nm/s)&#39;, &#39;V (1/s)&#39;, &#39;T (K)&#39;, &#39;rho \n(kg/m3)&#39;]\n    #     + list(gas.speciesName=\r\ns()))\n    for n in range(f.flame.nPoints()):\n        f.setGasState(n)\n     =\r\n   writeCSV(fcsv, [z[n], u[n], V[n], T[n], gas.density()]\n             +lis=\r\nt(gas.moleFractions())+list(gas.sourceTerms()))\n    fcsv.close()\n    nb=3Df=\r\n.flame.nPoints()\n    prof_T=3Df.profile(f.flame,&#39;T&#39;)\n    prof_V=3Df.profile=\r\n(f.flame,&#39;V&#39;)\n    prof_u=3Df.profile(f.flame,&#39;u&#39;)\n    prof_H=3Df.profile(f.=\r\nflame,&#39;H&#39;)\n    MF=3Dzeros([gas.nSpecies(),len(z)],type=3D&#39;Float32&#39;)\n    rho=\r\n=3Dzeros(len(z),type=3D&#39;Float32&#39;)\n    for k in range(f.flame.nPoints()):\n  =\r\n      f.setGasState(k)\n        rho[k]=3Dgas.density()\n        for l in rang=\r\ne (gas.nSpecies()):\n            MF[l][k]=3Dgas.moleFraction(gas.speciesName=\r\ns()[l])\n    print &#39;SAVE rich=3D %1.4g &#39; %(rich)\n    incr=3Dincr+1\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=\r\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;=\r\n&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;\n\nBut I meet some di=\r\nfficulties to solve this problem. Is someone have \nalready simulated a lot =\r\nof adiabatic flame with this file? \nIs my modifications OK?\nMy aim is to ob=\r\ntain a automatic generator of adiabatic flame. Now, I \ncan only simulated o=\r\nne or two following flames without obtain \na &#39;time integration failed&#39;\n\nTha=\r\nnks\n\nregards, David\n\n\n\n\n\n"}}