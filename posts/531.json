{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":44728387,"authorName":"David Goodwin","from":"David Goodwin &lt;dgoodwin@...&gt;","profile":"dggoodwin","replyTo":"LIST","senderId":"25iAB_nbhtXcaPqK1aqIkIxu1xc9faTE5xI3U_7-5vLvvPn9tyjLH6exhSHbhfr4L2AdwKps8hySJfBkXQgA2iyO_IQ3jpG0lB62","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [cantera] Problem &quot;Time integration failed&quot;","postDate":"1097443838","msgId":531,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEExNEYyRkNFLTFCMDMtMTFEOS04MkUxLTAwMEQ5M0FFMjQxQUBjYWx0ZWNoLmVkdT4=","inReplyToHeader":"PGNrYzY0NytvZ2M2QGVHcm91cHMuY29tPg==","referencesHeader":"PGNrYzY0NytvZ2M2QGVHcm91cHMuY29tPg=="},"prevInTopic":530,"nextInTopic":1544,"prevInTime":530,"nextInTime":532,"topicId":530,"numMessagesInTopic":3,"msgSnippet":"Steve, There are several things you can try.  Probably the best bet is to start with a simpler mechanism and generate a flame solution that can be used as the","rawEmail":"Return-Path: &lt;dgoodwin@...&gt;\r\nX-Sender: dgoodwin@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 19173 invoked from network); 10 Oct 2004 21:30:51 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m1.grp.scd.yahoo.com with QMQP; 10 Oct 2004 21:30:51 -0000\r\nReceived: from unknown (HELO outgoing-mail.its.caltech.edu) (131.215.49.69)\n  by mta3.grp.scd.yahoo.com with SMTP; 10 Oct 2004 21:30:51 -0000\r\nReceived: from earth-dog (earth-dog [192.168.1.3])\n\tby water-ox-postvirus (Postfix) with ESMTP id 4E11C26AE06\n\tfor &lt;cantera@yahoogroups.com&gt;; Sun, 10 Oct 2004 14:30:47 -0700 (PDT)\r\nReceived: from water-ox ([192.168.1.10])\n\tby earth-dog (MailMonitor for SMTP v1.2.2 ) ;\n\tSun, 10 Oct 2004 14:30:46 -0700 (PDT)\r\nReceived: from [10.0.1.3] (charter-241-056.caltech.edu [131.215.241.56])\n\tby water-ox.its.caltech.edu (Postfix) with ESMTP id 4512F26ACB5\n\tfor &lt;cantera@yahoogroups.com&gt;; Sun, 10 Oct 2004 14:30:46 -0700 (PDT)\r\nMime-Version: 1.0 (Apple Message framework v619)\r\nIn-Reply-To: &lt;ckc647+ogc6@...&gt;\r\nReferences: &lt;ckc647+ogc6@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed\r\nMessage-Id: &lt;A14F2FCE-1B03-11D9-82E1-000D93AE241A@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Sun, 10 Oct 2004 14:30:38 -0700\r\nTo: cantera@yahoogroups.com\r\nX-Mailer: Apple Mail (2.619)\r\nX-Spam-Status: No, hits=0.0 tagged_above=-100000.0 required=5.0 \r\nX-Spam-Level: \r\nX-eGroups-Remote-IP: 131.215.49.69\r\nFrom: David Goodwin &lt;dgoodwin@...&gt;\r\nSubject: Re: [cantera] Problem &quot;Time integration failed&quot;\r\nX-Yahoo-Group-Post: member; u=44728387\r\nX-Yahoo-Profile: dggoodwin\r\n\r\nSteve,\n\nThere are several things you can try.  Probably the best bet is to \nstart with a simpler mechanism and generate a flame solution that can \nbe used as the initial guess with the bigger mechanism. Cantera \nautomatically takes care of changed species order in the arrays when \nyou start from a previous solution generated with a different mechanism \nas long as the corresponding species in each mechanism have the same \nname (i.e., if methane is called &#39;CH4&#39; in one, it must be in the other \ntoo.) so it is easy to start with small mechanisms and work up.  You \ncan also try holding the temperature fixed, or not refining the grid, \nor refining it more, or...  Unfortunately since these problems are \nhighly nonlinear, there is no foolproof way to get a converged \nsolution.\n\nOne thing you might do is increase the value of loglevel to about 5, \nwhich will cause a great deal of information to be printed, including \nwhich solution component is not converging.\n\nDave G.\n\n\nOn Oct 10, 2004, at 1:29 PM, s_patyk wrote:\n\n&gt;\n&gt;\n&gt;\n&gt; Dear Prof. Goodwin,\n&gt;\n&gt; I have OneDim Solve running in Python. When I try to simulate a\n&gt; burner-stabilized, premixed methane+7%toluene/air flat flame with my\n&gt; own mechanism file n-butane (N.M. Marinow) I get two different\n&gt; errors like:\n&gt;\n&gt; - Traceback (most recent call last):\n&gt;   File &quot;C:&#92;Python23&#92;Cantera&#92;demos&#92;Python&#92;ch4+c7h8a.py&quot;, line 89, in ?\n&gt;     f.solve(loglevel, refine_grid)\n&gt;   File &quot;C:&#92;Python23&#92;Lib&#92;site-packages&#92;Cantera&#92;OneD&#92;BurnerFlame.py&quot;,\n&gt; line 55, in solve\n&gt;     Stack.solve(self, loglevel = loglevel, refine_grid = refine_grid)\n&gt;   File &quot;C:&#92;Python23&#92;Lib&#92;site-packages&#92;Cantera&#92;OneD&#92;onedim.py&quot;, line\n&gt; 412, in solve\n&gt;     return _cantera.sim1D_solve(self._hndl, loglevel, refine_grid)\n&gt; error:\n&gt;\n&gt; Procedure: OneDim::timeStep\n&gt; Error:   Time integration faile\n&gt;\n&gt;\n&gt; - or when i specify other composition or different parameter of\n&gt; tol_ss, tol_ts, it keeps going (for a long time &gt;&gt;20h) and not\n&gt; solwing the problem\n&gt;\n&gt;\n&gt; I guess it&#39;s a problem of the solution method or possibly to many\n&gt; species and reactions in mechanism file ? What can I do ? Can I use\n&gt; temperature profile and turn off the energy equations?, so I show\n&gt; below\n&gt;\n&gt;\n&gt; best regards\n&gt; Steve Patyk\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; P.S. This is my script (based on flame2.py):\n&gt;\n&gt; from Cantera import *\n&gt; from Cantera.OneD import *\n&gt; from time import clock\n&gt; t0 = clock()\n&gt; p         =   1.0*OneAtm           \t \t\t\n&gt; tburner   =   300.0                \t \t\t\n&gt; mdot      =   0.04                  \t\t\t\n&gt; comp      =  &#39;ch4:0.667556742, c6h5ch3:0.005192108, o2:1,\n&gt; n2:3.7619&#39;  \t\t\n&gt; initial_grid = [0.0, 0.01, 0.025, 0.05, 0.075, 0.1]\n&gt; pos = [0.0, 0.001, 0.01, 0.025, 0.05, 0.075, 0.099, 0.1, 0.2]\n&gt; temp = [373, 450, 700, 900, 1200, 1400, 1600, 1400, 1100\n&gt; tol_ss    = [1.0e-5, 1.0e-11]\n&gt; tol_ts    = [1.0e-5, 1.0e-9]\n&gt; loglevel  = 1\n&gt; \trefine_grid = 1                    \t\t\t\n&gt;\n&gt; gas = importPhase(&quot;mechnbutane.cti&quot;, &quot;nbutane&quot;)\n&gt; reactions = &quot;nbutane: 0001 to 0450&quot;\t\t\n&gt;\n&gt; gas.set(T = tburner, P = p, X = comp)\n&gt; f = BurnerFlame(gas = gas, grid = initial_grid)\n&gt; f.burner.set(massflux = mdot, mole_fractions = comp, temperature =\n&gt; tburner)\n&gt; f.set(tol = tol_ss, tol_time = tol_ts)\n&gt; f.showSolution()\n&gt; f.set(energy = &#39;off&#39;)\n&gt; f.setRefineCriteria(ratio = 20, slope = 0.5, curve = 0.2)\n&gt; f.setMaxJacAge(50, 50)\n&gt; f.setTimeStep(1.0e-5,[1, 2, 5, 10, 20, 30, 50])\n&gt; f.solve(loglevel, refine_grid)\n&gt; f.showSolution()\n&gt;\n&gt; f.set(energy = &#39;on&#39;)\n&gt; f.setRefineCriteria(ratio = 50.0, slope = 0.8, curve = 0.5)\n&gt; f.solve(loglevel, refine_grid)\n&gt;\n&gt; f.showSolution()\n&gt;\n&gt; z = f.flame.grid()\n&gt; T = f.T()\n&gt; u = f.u()\n&gt;\n&gt; fcsv = open(&#39;ch4+c7h8_L07.csv&#39;,&#39;w&#39;)\n&gt; writeCSV(fcsv, [&#39;z (m)&#39;, &#39;u (m/s)&#39;, &#39;T (K)&#39;, &#39;rho (kg/m3)&#39;,\n&gt;                 &quot;oh&quot;, &quot;h&quot;, &quot;o&quot;, &quot;ho2&quot;, &quot;h2o2&quot;, &quot;c2h2&quot;, &quot;h2ccch&quot;, &quot;c6h\n&gt; 6&quot;]\n&gt;          )\n&gt;\n&gt; for n in range(f.flame.nPoints()):\n&gt;     f.setGasState(n)\n&gt;     writeCSV(fcsv, [z[n], u[n], T[n], gas.density()]\n&gt;              +list(gas.moleFractions\n&gt; ([&quot;oh&quot;, &quot;h&quot;, &quot;o&quot;, &quot;ho2&quot;, &quot;h2o2&quot;, &quot;c2h2&quot;, &quot;h2ccch&quot;, &quot;c6h6&quot;])))\n&gt; fcsv.close()\n&gt; print &#39;solution saved to ch4+c7h8_L07.csv&#39;\n&gt; f.showStats()\n&gt; print &#39;Time to solve [s] = &#39;,clock() - t0\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n\n\n\n"}}