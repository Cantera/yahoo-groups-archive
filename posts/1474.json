{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":288581670,"authorName":"namcho5","from":"&quot;namcho5&quot; &lt;namcho5@...&gt;","profile":"namcho5","replyTo":"LIST","senderId":"O92z2Zp-hu2yViFY3MRoXO1_D5-v44OYmn_ibO10Q5jOBiUA4ihaWOjYlSnv51dSwu4D6AEmx-1GXNF3fqE1XRI1L9T-gg","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Piston velocity in matlab.","postDate":"1169438709","msgId":1474,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGVwMWQ1bCszODJyQGVHcm91cHMuY29tPg==","inReplyToHeader":"PGVvcmFtOCtscDN2QGVHcm91cHMuY29tPg=="},"prevInTopic":1472,"nextInTopic":1476,"prevInTime":1473,"nextInTime":1475,"topicId":1472,"numMessagesInTopic":3,"msgSnippet":"Are you solving an internal combustion engine case? The following part is to calculate correct piston speed, cylinder volume, and rate of volume change using","rawEmail":"Return-Path: &lt;namcho5@...&gt;\r\nReceived: (qmail 50391 invoked from network); 22 Jan 2007 09:41:26 -0000\r\nReceived: from unknown (66.218.66.166)\n  by m35.grp.scd.yahoo.com with QMQP; 22 Jan 2007 09:41:26 -0000\r\nReceived: from unknown (HELO n6c.bullet.sp1.yahoo.com) (69.147.64.164)\n  by mta5.grp.scd.yahoo.com with SMTP; 22 Jan 2007 09:41:26 -0000\r\nReceived: from [216.252.122.219] by n6.bullet.sp1.yahoo.com with NNFMP; 22 Jan 2007 09:40:32 -0000\r\nReceived: from [66.218.69.2] by t4.bullet.sp1.yahoo.com with NNFMP; 22 Jan 2007 09:40:31 -0000\r\nReceived: from [66.218.66.76] by t2.bullet.scd.yahoo.com with NNFMP; 22 Jan 2007 09:40:31 -0000\r\nX-Sender: namcho5@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 44537 invoked from network); 22 Jan 2007 04:06:35 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m23.grp.scd.yahoo.com with QMQP; 22 Jan 2007 04:06:35 -0000\r\nReceived: from unknown (HELO n26c.bullet.scd.yahoo.com) (66.218.67.218)\n  by mta7.grp.scd.yahoo.com with SMTP; 22 Jan 2007 04:06:35 -0000\r\nReceived: from [66.218.69.3] by n26.bullet.scd.yahoo.com with NNFMP; 22 Jan 2007 04:05:10 -0000\r\nReceived: from [66.218.66.87] by t3.bullet.scd.yahoo.com with NNFMP; 22 Jan 2007 04:05:10 -0000\r\nDate: Mon, 22 Jan 2007 04:05:09 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;ep1d5l+382r@...&gt;\r\nIn-Reply-To: &lt;eoram8+lp3v@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;namcho5&quot; &lt;namcho5@...&gt;\r\nSubject: Re: Piston velocity in matlab.\r\nX-Yahoo-Group-Post: member; u=288581670; y=syYJITt5bwmBEnkDdOgEy1MialfcISPU44AZzkhIOeVFyw\r\nX-Yahoo-Profile: namcho5\r\nX-eGroups-Approved-By: dggoodwin &lt;dgoodwin@...&gt; via web; 22 Jan 2007 09:40:30 -0000\r\n\r\nAre you solving an internal combustion engine case? The following \npart is =\r\nto calculate correct piston speed, cylinder volume, and rate \nof volume cha=\r\nnge using Python, but I could not get meaningful \ncylinder pressure when us=\r\ning ReactorNet advance. I&#39;m not good at \nCantera though. Let us know if it =\r\nworks for you. Nam \n\n# engine parameters \nbore =3D 85  * mm\nstroke =3D 81 *=\r\n mm\nconrod =3D 170 * mm  (do you know the connecting rod length?)\nsquish =\r\n=3D 2 * mm (you can calculate this from comp. ratio)\narea =3D Pi*bore*bore/=\r\n 4.0\ndisp =3D stroke * area\ncr =3D 9.3\nrpm =3D 2000\ndegivc =3D -145.0  ! in=\r\ntake valve closure IVC\ndegevo =3D 140.0   ! exhaust valve open EVO\ndegstep =\r\n=3D 1 (it could be too rough for combustion analysis)\n# IVC condition\ntemp =\r\n=3D 700.0\npres =3D 10.0*OneAtm\nphi =3D 0.6 (equivalence ratio)\n# (evo-ivc)=\r\n=3D140+145=3D285, 285/720*120/2000rpm=3D?? sec.\ntstop =3D (degevo-degivc)/7=\r\n20.*120/rpm\ndelt =3D degstep/720.*120/rpm\n\n# advance the simulation in time=\r\n\nnpoints=3Dint( (degevo-degivc)/degstep ) + 1\n\nfor n in range(1, npoints) :=\r\n\n      t =3D delt*n\n      theta=3Dt*Pi/30.*rpm + degivc/180.*Pi\n      ang=\r\n=3Dtheta*180./Pi\n#input A=3D angle in deg. \n#output B=3D volume, C=3D dv/dt=\r\nheta, D=3D piston speed\n#you may need volume change dv/dtheta in the energy=\r\n equation \n#cylinder volume and piston speed have been checked.\n      alolr=\r\n=3Dconrod/(0.5*stroke)\n#     pi=3Dacos(-1.)\n      volc =3D 0.25*Pi*bore*bor=\r\ne*stroke/(cr-1.0)\n      term=3Dalolr+1.-cos(theta)-sqrt(alolr*alolr-sin(the=\r\nta)*sin(theta))\n      B=3Dvolc*(1.+(cr-1.)*0.5*term)\n      term2=3D1.+cos(t=\r\nheta)/sqrt(alolr*alolr-sin(theta)*sin(theta))\n      C=3Dvolc * (cr-1.)*0.5 =\r\n* sin(theta) * term2 * Pi/30.*rpm\n      mps=3D2.0*stroke*rpm/60.  (mean pis=\r\nton speed)\n      D=3Dmps*Pi*0.5*sin(theta)*( 1 + cos(theta)/sqrt(alolr**2-s=\r\nin\n(theta)**2) )     \n      cyl_vol =3D B\n#     print &#39;step=3D&#39;,n,&#39; CA=3D&#39;,=\r\nang,&#39; vol(cc)=3D&#39;,B*1e6,&#39; dvdt(m3/s)\n=3D&#39;,C,&#39;speed(m/s)=3D&#39;,D \n\n\n\n\n--- In c=\r\nantera@yahoogroups.com, &quot;shyam_umd&quot; &lt;shyam_umd@...&gt; wrote:\n&gt;\n&gt; Hi,\n&gt;   I&#39;ve=\r\n been trying to implement a piston moving in a cylinder in\n&gt; cantera using =\r\nmatlab but havent had any success yet. I was able to \nget the same working =\r\nin python using a code that dr.goodwin had \nposted on this group. \n&gt;   One =\r\nthing i noticed is that there is no setVelocity.m file in my\n&gt; installation=\r\n in the C:&#92;Cantera&#92;MATLAB&#92;toolbox&#92;cantera&#92;@Wall. I think\n&gt; there should be =\r\na file so that in matlab i can call this function to\n&gt; set the piston veloc=\r\nity. I tried to code a function for setVelocity \nby\n&gt; myself and this is wh=\r\nat i put in:\n&gt; \n&gt; function setVelocity(w, v)\n&gt; % SETVELOCITY - \n&gt; %   \n&gt; wa=\r\nllmethods(10, wall_hndl(w), v);\n&gt; The &#39;10&#39; is because in the c++ header fil=\r\ne for\n&gt; wallmethods..&#39;10&#39;corresponds to set_wall velocity.\n&gt; But i am unabl=\r\ne to get it to work for me.\n&gt; This is the main part of my code i am using i=\r\nn matlab:\n&gt; \n&gt; % unit conversion factors\n&gt; mm =3D 0.001;\n&gt; cm =3D 0.01;\n&gt; \n=\r\n&gt; % piston parameters\n&gt; bore =3D 85.0 * mm;\n&gt; stroke =3D 81.0 * mm;\n&gt; area =\r\n=3D pi*bore*bore/4.0;\n&gt; disp =3D stroke * area;\n&gt; compression_ratio =3D 9.3=\r\n;\n&gt; \n&gt; rpm =3D 2000.0;\n&gt; freq =3D rpm * 60.0;\n&gt; omega =3D 2*pi*freq;\n&gt; cyl_=\r\nheight =3D (1.0/compression_ratio + 1.0)*stroke;\n&gt; cyl_vol =3D cyl_height*a=\r\nrea;\n&gt; % set the initial conditions\n&gt; set(gas,&#39;T&#39;,300.0,&#39;P&#39;,oneatm,&#39;X&#39;,&#39;CH4=\r\n:1, O2:2, N2:7.52&#39;);\n&gt; env =3D Reservoir(gas);\n&gt; % create a reactor, and in=\r\nsert the gas\n&gt; r =3D Reactor(gas);\n&gt; setInitialVolume(r,cyl_vol);\n&gt; % creat=\r\ne a reactor network and insert the reactor\n&gt; network =3D ReactorNet({r});\n&gt;=\r\n v =3D Func(&#39;fourier&#39;, 4,&#39;omega, (0.0, 0.0), (0.0, -\n0.5*omega*stroke)&#39;);\n&gt;=\r\n piston =3D Wall(&#39;r, env&#39;);\n&gt; install(piston,r,env);\n&gt; setArea(piston,area)=\r\n;\n&gt; setVelocity(piston,v);\n&gt; \n&gt; t =3D 0;\n&gt; dt =3D 1.0e-5;\n&gt; t0 =3D cputime;=\r\n\n&gt; for n =3D 1:100\n&gt;     t =3D 0.1*n/freq;\n&gt;     advance(network,t);\n&gt;     =\r\ntim(n) =3D time(r);\n&gt;     temp(n) =3D temperature(r);  \n&gt;     Vol(n) =3D vo=\r\nlume(r);\n&gt;     pres(n) =3D pressure(r);\n&gt;   x(n,1:3) =3D moleFraction(gas,{=\r\n&#39;OH&#39;,&#39;H&#39;,&#39;H2&#39;});\n&gt; end\n&gt;\n\n\n\n"}}