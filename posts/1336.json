{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":254563161,"authorName":"Dan Smyth","from":"&quot;Dan Smyth&quot; &lt;das69@...&gt;","profile":"dan_gaidin_ut","replyTo":"LIST","senderId":"v25hSRHlLW6HnuUSADlsHVbcz7t5S6cX6Na_xKOt1Qfy7QVq-hL-nDnI34ZArFZKR8yf0ICDiC1awV5zpzFCOxvjJQj8","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Fortran - problem with meanmolarmass()","postDate":"1160760286","msgId":1336,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGVnb2k0dSsybjZzQGVHcm91cHMuY29tPg==","inReplyToHeader":"PDNBQ0M3ODk3QTk0NjMxNDFCRTBEOTM4RkMzMURGRDE5MDIyMUIxRjdARVMyMlNOTE5ULnNybi5zYW5kaWEuZ292Pg=="},"prevInTopic":1328,"nextInTopic":1338,"prevInTime":1335,"nextInTime":1337,"topicId":1314,"numMessagesInTopic":7,"msgSnippet":"When we added the line below: double precision meanMolarMass, intEnergy_mass to our code, things worked fine for every call.  Was unaware that subroutines","rawEmail":"Return-Path: &lt;das69@...&gt;\r\nX-Sender: das69@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 44733 invoked from network); 13 Oct 2006 17:28:06 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m32.grp.scd.yahoo.com with QMQP; 13 Oct 2006 17:28:06 -0000\r\nReceived: from unknown (HELO n4b.bullet.sc5.yahoo.com) (66.163.187.171)\n  by mta1.grp.scd.yahoo.com with SMTP; 13 Oct 2006 17:28:06 -0000\r\nReceived: from [66.163.187.123] by n4.bullet.sc5.yahoo.com with NNFMP; 13 Oct 2006 17:24:47 -0000\r\nReceived: from [66.218.69.1] by t4.bullet.sc5.yahoo.com with NNFMP; 13 Oct 2006 17:24:47 -0000\r\nReceived: from [66.218.66.68] by t1.bullet.scd.yahoo.com with NNFMP; 13 Oct 2006 17:24:47 -0000\r\nDate: Fri, 13 Oct 2006 17:24:46 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;egoi4u+2n6s@...&gt;\r\nIn-Reply-To: &lt;3ACC7897A9463141BE0D938FC31DFD190221B1F7@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;Dan Smyth&quot; &lt;das69@...&gt;\r\nSubject: Re: Fortran - problem with meanmolarmass()\r\nX-Yahoo-Group-Post: member; u=254563161; y=5vrFUfyhg-gsW_NbMjnK2S6pWcmPTVhaxO9H6HF0iAI44jjJ_C6Bkg\r\nX-Yahoo-Profile: dan_gaidin_ut\r\n\r\nWhen we added the line below:\n\ndouble precision meanMolarMass, intEnergy_ma=\r\nss\n\nto our code, things worked fine for every call.  Was unaware that\nsubro=\r\nutines calls like this needed to be declared inside Fortran. \nThanks for th=\r\ne indirect help.  \n\nDan\n\n\n--- In cantera@yahoogroups.com, &quot;Moffat, Harry K&quot;=\r\n &lt;hkmoffa@...&gt; wrote:\n&gt;\n&gt; Hi Mike,\n&gt; \n&gt;    When I ran your program, adding =\r\nthe line\n&gt;       double precision meanMolarMass, intEnergy_mass\n&gt; \n&gt; I obta=\r\nined:\n&gt;       28.8507043\n&gt;       -84549.2746 \n&gt; \n&gt; That must mean there is =\r\nan issue with your installation, or the make,\n&gt; make install process didn&#39;t=\r\n wipe out the old files.\n&gt; \n&gt; Best wishes,\n&gt; Harry\n&gt; \n&gt; \n&gt; Harry Moffat    =\r\n                                         (w) (505)\n&gt; 844-6912\n&gt; Multiphase =\r\nTransport Processes Division    (f)   (505) 844-9297\n&gt; Sandia National Labo=\r\nratories\n&gt; hkmoffa@...\n&gt; P. O. Box 5800-0834\n&gt; Albuquerque, NM 87185-0834\n&gt;=\r\n \n&gt; -----Original Message-----\n&gt; From: cantera@yahoogroups.com [mailto:cant=\r\nera@yahoogroups.com] On Behalf\n&gt; Of Michael Johnson\n&gt; Sent: Tuesday, Octobe=\r\nr 03, 2006 2:33 PM\n&gt; To: cantera@yahoogroups.com\n&gt; Subject: Re: [cantera] R=\r\ne: Fortran - problem with meanmolarmass()\n&gt; \n&gt; Hi Harry and Dan,\n&gt; \n&gt; I che=\r\ncked out and built Cantera from CVS today, but am still getting\n&gt; very stra=\r\nnge results from a simple Fortran example problem:\n&gt; \n&gt;        PROGRAM CANT=\r\nERATEST\n&gt;        IMPLICIT DOUBLE PRECISION (A-H,O-Z)\n&gt;        dimension Y(5=\r\n3)\n&gt; \n&gt;        DO 10 I=3D1,53\n&gt;              Y(I) =3D 0.0\n&gt;   10   CONTINUE=\r\n\n&gt; \n&gt;        p =3D 101325.0\n&gt;        t =3D 300.0\n&gt;        Y(4) =3D 0.233\n&gt; =\r\n       Y(48) =3D 0.767\n&gt; \n&gt;        call newIdealGasMix(&#39;gri30.cti&#39;,&#39;gri30_m=\r\nix&#39;,&#39;Mix&#39;)\n&gt;        call setState_TPY(t,p,Y)\n&gt; \n&gt;        WRITE(*,30) meanMo=\r\nlarMass()\n&gt;        WRITE(*,30) intEnergy_mass()\n&gt; \n&gt;   30   format(E16.8)\n&gt;=\r\n        STOP\n&gt;        END\n&gt; \n&gt; This program returns the following values:\n&gt;=\r\n     .00000000E+00\n&gt;     .45969286E-33\n&gt; \n&gt; I compiled demo_ftnlib.cpp and =\r\nmy example program file the same way they\n&gt; are done for the demo.f program=\r\n included in the distribution\n&gt; (/usr/local/cantera/templates/f77/), which =\r\non my system looks like this:\n&gt; \n&gt; g++ -c demo_ftnlib.cpp -I/usr/local/cant=\r\nera/include -O3 -Wall\n&gt; g77 -c canteratest.f -O3  -fno-second-underscore\n&gt; =\r\ng++ -o test canteratest.o demo_ftnlib.o -L/usr/local/cantera/lib\n&gt; -L/usr/l=\r\nocal/lib    -luser -loneD -lzeroD -ltransport -lcantera \n&gt; -lsundials_cvode=\r\ns -lsundials_nvecserial -lctlapack -lctblas -lctmath\n&gt; -ltpx -lctf2c -lconv=\r\nerters -lctcxx  -L/usr/local/lib\n&gt; -L/usr/lib/gcc-lib/i586-suse-linux/3.3.4=\r\n\n&gt; -L/usr/lib/gcc-lib/i586-suse-linux/3.3.4/../../../../i586-suse-linux/lib=\r\n\n&gt; -L/usr/lib/gcc-lib/i586-suse-linux/3.3.4/../../.. -lfrtbegin -lg2c -lm\n&gt;=\r\n -lgcc_s\n&gt; \n&gt; \n&gt; Why would meanMolarMass() and intEnergy_mass() be returnin=\r\ng such bogus\n&gt; numbers?\n&gt; Thanks,\n&gt; Michael\n&gt; \n&gt; \n&gt; \n&gt; Moffat, Harry K wrot=\r\ne:\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; Hi Dan,\n&gt; &gt; \n&gt; &gt; I have fixed one aspect of this problem w=\r\nithin the CVS code.\n&gt; Previously,\n&gt; &gt; after initialization, if the mole or =\r\nmass fractions were not set in\n&gt; the\n&gt; &gt; CTI or CTML file within the state =\r\nXML block, the ThermoPhase object\n&gt; &gt; would have its mass fraction vector c=\r\nome back from initialization with\n&gt; &gt; it all set to zeroes. Therefore, the =\r\nmean molecular weight would\n&gt; return\n&gt; &gt; a zero value, until the setstate_T=\r\nPX() or setstate_TPY() routines were\n&gt; &gt; called.\n&gt; &gt; \n&gt; &gt; I just committed =\r\na change to the CVS repository so that species #0\n&gt; will\n&gt; &gt; have its mass =\r\nfraction set to 1.0 at initialization but before Cantera\n&gt; &gt; handles the st=\r\nate XML block information. Therefore, the mass fraction\n&gt; &gt; vector should s=\r\num to one from the get-go.\n&gt; &gt; \n&gt; &gt; I hope the problems you are seeing will=\r\n be fixed by this. However, I\n&gt; &gt; would be very interested to know if this =\r\nis not the case.\n&gt; &gt; meanMolarMass() is just a wrapper around the kernel ro=\r\nutine,\n&gt; &gt; State::meanMolecularWeight(), in the State object. Cantera&#39;s\n&gt; i=\r\nndependent\n&gt; &gt; variables are density, temperature, and the mass fraction ve=\r\nctor. The\n&gt; &gt; mean molecular weight is calculated whenever the mass fractio=\r\nn vector\n&gt; is\n&gt; &gt; changed. Then, the meanMolecularWeight() function just re=\r\nports the\n&gt; &gt; number. Setting the temperature or the density (or equivalent=\r\nly the\n&gt; &gt; pressure) shouldn&#39;t affect the internally calculated\n&gt; meanMolec=\r\nularWeight\n&gt; &gt; value.\n&gt; &gt; \n&gt; &gt; Best wishes,\n&gt; &gt; Harry\n&gt; &gt; \n&gt; &gt; Harry Moffat=\r\n (w) (505)\n&gt; &gt; 844-6912\n&gt; &gt; Multiphase Transport Processes Division (f) (50=\r\n5) 844-9297\n&gt; &gt; Sandia National Laboratories\n&gt; &gt; hkmoffa@... &lt;mailto:hkmoff=\r\na%40sandia.gov&gt;\n&gt; &gt; P. O. Box 5800-0834\n&gt; &gt; Albuquerque, NM 87185-0834\n&gt; &gt; =\r\n\n&gt; &gt; -----Original Message-----\n&gt; &gt; From: cantera@yahoogroups.com &lt;mailto:c=\r\nantera%40yahoogroups.com&gt; \n&gt; &gt; [mailto:cantera@yahoogroups.com &lt;mailto:cant=\r\nera%40yahoogroups.com&gt;] On\n&gt; \n&gt; &gt; Behalf\n&gt; &gt; Of Dan Smyth\n&gt; &gt; Sent: Friday,=\r\n September 29, 2006 4:08 PM\n&gt; &gt; To: cantera@yahoogroups.com &lt;mailto:cantera=\r\n%40yahoogroups.com&gt;\n&gt; &gt; Subject: [cantera] Re: Fortran - problem with meanm=\r\nolarmass()\n&gt; &gt; \n&gt; &gt; Hey Michael,\n&gt; &gt; \n&gt; &gt; An associate and I are trying to =\r\nreplace Chemkin calls, within a\n&gt; &gt; developed Fortran code, with Cantera ca=\r\nlls through the demo_lib.cpp\n&gt; &gt; interface as a guide. We have been having =\r\nsome trouble with the\n&gt; &gt; meanmolarmass() call. Sometimes it will work and =\r\nother times it will\n&gt; &gt; not. (When it will not work, the code will return a=\r\n segmentation fault\n&gt; &gt; within our Fortran code when the value returned is =\r\nprinted out).\n&gt; &gt; We are guessing at this point that there is some conflict=\r\n that we have\n&gt; &gt; not found yet that makes this call work intermittently. I=\r\nt does work\n&gt; at\n&gt; &gt; points in our code though, and so we think that this i=\r\ns a coding issue\n&gt; &gt; on our side and not a Cantera issue.\n&gt; &gt; \n&gt; &gt; Dan Smyt=\r\nh\n&gt; &gt; \n&gt; &gt; --- In cantera@yahoogroups.com &lt;mailto:cantera%40yahoogroups.com=\r\n&gt;, \n&gt; &gt; Michael Johnson &lt;johns3c@&gt; wrote:\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; Dear Cantera group,=\r\n\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; I am working on channel-flow simulations with DASSL, coupled=\r\n to\n&gt; &gt; Cantera.\n&gt; &gt;  &gt; The command meanmolarmass() returns a value of 0.00=\r\n00E+00 but if I\n&gt; &gt;  &gt; take the ratio of, say, cp_mole()/cp_mass() it does =\r\nreturn the\n&gt; proper\n&gt; &gt; value.\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; I&#39;m running on Linux, using th=\r\ne demo_ftnlib.cpp provided with the\n&gt; &gt; source\n&gt; &gt;  &gt; code. I have looked t=\r\nhrough the header files under\n&gt; &gt;  &gt; /usr/local/include/cantera but have be=\r\nen unable to find where\n&gt; &gt;  &gt; meanMolecularWeight() is defined. It is cert=\r\nainly used to calculate\n&gt; &gt;  &gt; molar properties with no problem, but I can&#39;=\r\nt figure out why\n&gt; &gt;  &gt; meanmolarmass() is not giving the proper value.\n&gt; &gt;=\r\n  &gt;\n&gt; &gt;  &gt; Is anyone out there using Cantera in Fortran?\n&gt; &gt;  &gt; Thanks,\n&gt; &gt;=\r\n  &gt; Michael\n&gt; &gt;  &gt;\n&gt; &gt; \n&gt; &gt; Yahoo! Groups Links\n&gt; &gt; \n&gt; &gt; \n&gt; \n&gt; \n&gt;  \n&gt; Yahoo=\r\n! Groups Links\n&gt;\n\n\n\n\n"}}