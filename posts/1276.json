{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":32942367,"authorName":"Moffat, Harry K","from":"&quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;","profile":"hkmoffat","replyTo":"LIST","senderId":"wSvuOu0BjtB3ipCsdAiQBVwm_WeJALXNnaj0i2VkZDg7uZP6djot649LgQfs8mc-1WxnEWVZbpvy8x40xkGCPEC5LyoU1902dCBSwOw","spamInfo":{"isSpam":false,"reason":"6"},"subject":"RE: [cantera] Re: negative_A reaction option returning nan","postDate":"1151959451","msgId":1276,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNBQ0M3ODk3QTk0NjMxNDFCRTBEOTM4RkMzMURGRDE5MDFDNjdGNjFARVMyMlNOTE5ULnNybi5zYW5kaWEuZ292Pg=="},"prevInTopic":1275,"nextInTopic":1278,"prevInTime":1275,"nextInTime":1277,"topicId":1264,"numMessagesInTopic":8,"msgSnippet":"Hi, I ve implemented an initial fix to this bug and have added a test problem to the test suite to ensure coverage. These are now checked into the CVS","rawEmail":"Return-Path: &lt;hkmoffa@...&gt;\r\nX-Sender: hkmoffa@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 17898 invoked from network); 3 Jul 2006 20:44:34 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m39.grp.scd.yahoo.com with QMQP; 3 Jul 2006 20:44:34 -0000\r\nReceived: from unknown (HELO sentry.sandia.gov) (132.175.109.21)\n  by mta1.grp.scd.yahoo.com with SMTP; 3 Jul 2006 20:44:34 -0000\r\nReceived: from 132.175.109.1 by sentry.sandia.gov with ESMTP (Tumbleweed\n MMS SMTP Relay 01 (Email Firewall v6.2.2)); Mon, 03 Jul 2006 14:44:12\n -0600\r\nX-Server-Uuid: 4A6F66F3-3BA9-40FF-AC33-461A8279D6D5\r\nReceived: from ES23SNLNT.srn.sandia.gov (ec04snlnt.sandia.gov\n [134.253.164.156] (may be forged)) by mailgate.sandia.gov (\n 8.13.6/8.13.6) with ESMTP id k63KiBTE004960 for\n &lt;cantera@yahoogroups.com&gt;; Mon, 3 Jul 2006 14:44:11 -0600 (MDT)\r\nReceived: from ES22SNLNT.srn.sandia.gov ([134.253.164.158]) by\n ES23SNLNT.srn.sandia.gov with Microsoft SMTPSVC(6.0.3790.1830); Mon, 3\n Jul 2006 14:44:11 -0600\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nDate: Mon, 3 Jul 2006 14:44:11 -0600\r\nMessage-ID: &lt;3ACC7897A9463141BE0D938FC31DFD1901C67F61@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [cantera] Re: negative_A reaction option returning nan\r\nThread-Index: Acaew9B0jvb0dve/T2at/q/5NcbwEwAHN1sg\r\nTo: cantera@yahoogroups.com\r\nX-OriginalArrivalTime: 03 Jul 2006 20:44:11.0854 (UTC)\n FILETIME=[707A6EE0:01C69EE1]\r\nX-TMWD-Spam-Summary: TS=20060703204413; SEV=2.0.2; DFV=A2006070307;\n IFV=2.0.4,4.0-8; RPD=4.00.0004; ENG=IBF; RPDID=NA; CAT=NONE; CON=NONE\r\nX-MMS-Spam-Filter-ID: A2006070307_4.00.0004_4.0-8\r\nX-WSS-ID: 68B75E1627K7670231-01-01\r\nContent-Type: text/plain;\n charset=us-ascii\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;\r\nSubject: RE: [cantera] Re: negative_A reaction option returning nan\r\nX-Yahoo-Group-Post: member; u=32942367; y=gpMzMMkr-5RrPcWrqYxSYKJxMSx0GGABYiaFWZOrrEQpKu0\r\nX-Yahoo-Profile: hkmoffat\r\n\r\nHi,\n\nI&#39;ve implemented an initial fix to this bug and have added a test\nprob=\r\nlem to the test suite to ensure coverage. These are now checked into\nthe CV=\r\nS repository. There is still some additional work to be done here,\nas the f=\r\nix I&#39;ve introduced allows for any reaction to have a negative or\nzero preex=\r\nponential value, at least in the evaluation routine.\n\nA more permanent fix =\r\nto the bug, where the combined net rate of progress\nfor a set of duplicate =\r\nreactions is ensured to be positive, still needs\nto be developed.\n\nHarry Mo=\r\nffat\n\n\n\n-----Original Message-----\nFrom: cantera@yahoogroups.com [mailto:ca=\r\nntera@yahoogroups.com] On Behalf\nOf Dan Smyth\nSent: Monday, July 03, 2006 1=\r\n0:58 AM\nTo: cantera@yahoogroups.com\nSubject: [cantera] Re: negative_A react=\r\nion option returning nan\n\nReally what it comes down to, as far as I underst=\r\nand, is the fact that\nall of these reaction rate coefficients (A, n, Ea) ar=\r\ne all just best-fit\nparameters.  The way that this particular reaction was =\r\nput together, was\nto have the rate of this single reaction be a combination=\r\n of two\nidentical reactions with different rates:\n\nNH+NO=3DN2O+H    2.94E+1=\r\n4  -0.40   0.000E+00\nNH+NO=3DN2O+H    -2.16E+13  -0.23   0.000E+00\n\nSo, the=\r\n actual overall forward rate of reaction is (where both are based\non zero a=\r\nctivation energy):\n\nrate_f=3D (2.94E+14)*T^(-0.40)*[NH][NO] + (-2.16E+13)*T=\r\n^(-0.23)*[NH][NO]\n\nwhich simplifies to:\n\nrate_f=3D (2.94E+14*T^(-0.40) - 2.=\r\n16E+13*T^(-0.23))*[NH][NO]\n\nwhere the &quot;new overall&quot; kf is:\n\nkf=3D 2.94E+14*=\r\nT^(-0.40) - 2.16E+13*T^(-0.23)\n\nwhich should turn out to be a positive numb=\r\ner every time in order to\nkeep the thermodynamics consistent (emphasis on s=\r\nhould).  Then, then\nreaction rate coefficient for the reverse reaction (kr)=\r\n can be\ncalculated in the typical way with Keq.  Hope all this helps more t=\r\nhan\nit confuses. :)\n\nDan\n\n--- In cantera@yahoogroups.com, &quot;andr_1976&quot; &lt;andr=\r\n1976@...&gt; wrote:\n&gt;\n&gt; Dear Dan\n&gt; \n&gt; I&#39;m not really sure that I understand th=\r\ne concept of a negative \n&gt; prefactor, however this might be a fix:\n&gt; A nega=\r\ntive prefactor should result in a a negative rate constant.\n&gt; According to =\r\nthe principle of microscopic reversiblility\n&gt; \n&gt; k_b =3D k_f/K_eq\n&gt; \n&gt; , wh=\r\nere K_eq is the equilibirum constant for an elementary reaction \n&gt; step and=\r\n k_f and k_b are the forward and backward rate constants, \n&gt; respectively. =\r\nSince K_eq can not be negavtive (at least from my \n&gt; knowledge of basic sta=\r\ntistical thermodynamics) a negative k_a would \n&gt; result in k_b being negati=\r\nve as well. For a simple reaction, say,\n&gt; \n&gt; a + b =3D c\n&gt; \n&gt; the rate equa=\r\ntion is:\n&gt; \n&gt; r =3D k_f *[a]*[b] - k_b[c]\n&gt; \n&gt; Changing the sign of both k_=\r\nf and k_b\n&gt; \n&gt; r =3D -k_f *[a]*[b] + k_b*[c]\n&gt; \n&gt; This is actually equal to=\r\n the rate equation of the reverse reaction.\n&gt; Thus, in my point of view a n=\r\negative prefactor is just a &quot;cover up&quot; of\n\n&gt; the fact that the reaction was=\r\n written up in the wrong direction.\n&gt; Does this make any sense, or have I c=\r\nompletely missed the point here?\n&gt; \n&gt; Kind regards\n&gt; \n&gt; Anders   \n&gt; \n&gt; --- =\r\nIn cantera@yahoogroups.com, &quot;Dan Smyth&quot; &lt;das69@&gt; wrote:\n&gt; &gt;\n&gt; &gt; Hi,\n&gt; &gt; \n&gt; =\r\n&gt; I have successfully installed Cantera onto my Linux box and am \n&gt; &gt; tryin=\r\ng to replace numerous Chemkin subroutines in a code of mine \n&gt; &gt; with corre=\r\nsponding Cantera calls.  I have translated a mechanism \n&gt; &gt; from the Chemki=\r\nn format into Cantera format by using the ck2cti \n&gt; &gt; program with the veri=\r\nfication option and seemed to pass.  I&#39;m \n&gt; &gt; calling\n&gt; &gt; getNetProductionR=\r\nates(wdot) from my program and am getting &quot;nan&quot; in \n&gt; &gt; return for seven di=\r\nfferent species.  I have tracked the problem by\n&gt; &gt; calling:\n&gt; &gt; \n&gt; &gt; getFw=\r\ndRatesOfProgress\n&gt; &gt; getRevRatesOfProgress\n&gt; &gt; getFwdRateConstants\n&gt; &gt; getR=\r\nevRateConstants\n&gt; &gt; \n&gt; &gt; and have found that there are two reactions in my =\r\nmechanism that are\n\n&gt; &gt; returning a &quot;nan&quot; value.  They are both reactions t=\r\nhat have been \n&gt; &gt; declared as duplicate reactions and they also both have =\r\nnegative \n&gt; &gt; pre-exponentials.  (These are the only reactions in my mechan=\r\nism \n&gt; &gt; that have a negative pre-exponential.)  My original Chemkin \n&gt; &gt; m=\r\nechanism file had the following within it:\n&gt; &gt; \n&gt; &gt; First Reaction:\n&gt; &gt; NH+=\r\nNO=3DN2O+H               2.94E+14  -0.40   0.000E+00\n&gt; &gt; DUP\n&gt; &gt; NH+NO=3DN2=\r\nO+H              -2.16E+13  -0.23   0.000E+00\n&gt; &gt; DUP\n&gt; &gt; \n&gt; &gt; Second React=\r\nion:\n&gt; &gt; NH2+NO=3DN2+H2O             1.30E+16  -1.25   0.000E+00\n&gt; &gt; DUP\n&gt; =\r\n&gt; NH2+NO=3DN2+H2O            -2.80E+13  -0.55   0.000E+00\n&gt; &gt; DUP\n&gt; &gt; \n&gt; &gt; =\r\nThe listed reactions in the cti conversion of this mechanism file \n&gt; &gt; look=\r\n like this:\n&gt; &gt; \n&gt; &gt; First Reaction:\n&gt; &gt; #  Reaction 77\n&gt; &gt; #  10.5, 9 (a)\n=\r\n&gt; &gt; #  Miller & Melius, 24th Symp. on Comb., 1992.\n&gt; &gt; reaction(  &quot;NH + NO =\r\n&lt;=3D&gt; N2O + H&quot;,  [2.94000E+14, -0.4, 0],\n&gt; &gt;          options =3D [&quot;duplica=\r\nte&quot;])\n&gt; &gt; \n&gt; &gt; #  Reaction 78\n&gt; &gt; reaction(  &quot;NH + NO &lt;=3D&gt; N2O + H&quot;,  [-2.=\r\n16000E+13, -0.23, 0],\n&gt; &gt;          options =3D [&quot;negative_A&quot;, &quot;duplicate&quot;])=\r\n\n&gt; &gt; \n&gt; &gt; Second Reaction:\n&gt; &gt; #  Reaction 90\n&gt; &gt; #  10.6, 9 (b)\n&gt; &gt; #  Gla=\r\nrborg et al., Int. J. Chem. Kinet., 26, 421, 1994.\n&gt; &gt; reaction(  &quot;NH2 + NO=\r\n &lt;=3D&gt; N2 + H2O&quot;,  [1.30000E+16, -1.25, 0],\n&gt; &gt;          options =3D [&quot;dupl=\r\nicate&quot;])\n&gt; &gt; \n&gt; &gt; #  Reaction 91\n&gt; &gt; reaction(  &quot;NH2 + NO &lt;=3D&gt; N2 + H2O&quot;, =\r\n [-2.80000E+13, -0.55, 0],\n&gt; &gt;          options =3D [&quot;negative_A&quot;, &quot;duplica=\r\nte&quot;])\n&gt; &gt; \n&gt; &gt; And the xml translation contains the following:\n&gt; &gt; \n&gt; &gt; Fir=\r\nst Reaction:\n&gt; &gt;     &lt;!-- reaction 0077    --&gt;\n&gt; &gt;     &lt;reaction duplicate=\r\n=3D&quot;yes&quot; reversible=3D&quot;yes&quot; id=3D&quot;0077&quot;&gt;\n&gt; &gt;       &lt;equation&gt;NH + NO [=3D] =\r\nN2O + H&lt;/equation&gt;\n&gt; &gt;       &lt;rateCoeff&gt;\n&gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt;       =\r\n     &lt;A&gt;2.940000E+11&lt;/A&gt;\n&gt; &gt;            &lt;b&gt;-0.40000000000000002&lt;/b&gt;\n&gt; &gt;    =\r\n        &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt;         &lt;/Arrhenius&gt;\n&gt; &gt;     =\r\n  &lt;/rateCoeff&gt;\n&gt; &gt;       &lt;reactants&gt;NH:1.0 NO:1&lt;/reactants&gt;\n&gt; &gt;       &lt;prod=\r\nucts&gt;H:1 N2O:1.0&lt;/products&gt;\n&gt; &gt;     &lt;/reaction&gt;\n&gt; &gt; \n&gt; &gt;     &lt;!-- reaction =\r\n0078    --&gt;\n&gt; &gt;     &lt;reaction duplicate=3D&quot;yes&quot; reversible=3D&quot;yes&quot; negative=\r\n_A=3D&quot;yes&quot;\n&gt; id=3D&quot;0078&quot;&gt;\n&gt; &gt;       &lt;equation&gt;NH + NO [=3D] N2O + H&lt;/equati=\r\non&gt;\n&gt; &gt;       &lt;rateCoeff&gt;\n&gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt;            &lt;A&gt;-2.1600=\r\n00E+10&lt;/A&gt;\n&gt; &gt;            &lt;b&gt;-0.23000000000000001&lt;/b&gt;\n&gt; &gt;            &lt;E uni=\r\nts=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt;         &lt;/Arrhenius&gt;\n&gt; &gt;       &lt;/rateCoeff&gt;=\r\n\n&gt; &gt;       &lt;reactants&gt;NH:1.0 NO:1&lt;/reactants&gt;\n&gt; &gt;       &lt;products&gt;H:1 N2O:1=\r\n.0&lt;/products&gt;\n&gt; &gt;     &lt;/reaction&gt;\n&gt; &gt; \n&gt; &gt; \n&gt; &gt; Second Reaction:\n&gt; &gt;     &lt;!=\r\n-- reaction 0090    --&gt;\n&gt; &gt;     &lt;reaction duplicate=3D&quot;yes&quot; reversible=3D&quot;y=\r\nes&quot; id=3D&quot;0090&quot;&gt;\n&gt; &gt;       &lt;equation&gt;NH2 + NO [=3D] N2 + H2O&lt;/equation&gt;\n&gt; &gt;=\r\n       &lt;rateCoeff&gt;\n&gt; &gt;         &lt;Arrhenius&gt;\n&gt; &gt;            &lt;A&gt;1.300000E+13&lt;/=\r\nA&gt;\n&gt; &gt;            &lt;b&gt;-1.25&lt;/b&gt;\n&gt; &gt;            &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000=\r\n&lt;/E&gt;\n&gt; &gt;         &lt;/Arrhenius&gt;\n&gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt;       &lt;reactants&gt;N=\r\nO:1 NH2:1.0&lt;/reactants&gt;\n&gt; &gt;       &lt;products&gt;N2:1.0 H2O:1&lt;/products&gt;\n&gt; &gt;    =\r\n &lt;/reaction&gt;\n&gt; &gt; \n&gt; &gt;     &lt;!-- reaction 0091    --&gt;\n&gt; &gt;     &lt;reaction dupli=\r\ncate=3D&quot;yes&quot; reversible=3D&quot;yes&quot; negative_A=3D&quot;yes&quot;\n&gt; id=3D&quot;0091&quot;&gt;\n&gt; &gt;      =\r\n &lt;equation&gt;NH2 + NO [=3D] N2 + H2O&lt;/equation&gt;\n&gt; &gt;       &lt;rateCoeff&gt;\n&gt; &gt;    =\r\n     &lt;Arrhenius&gt;\n&gt; &gt;            &lt;A&gt;-2.800000E+10&lt;/A&gt;\n&gt; &gt;            &lt;b&gt;-0.5=\r\n5000000000000004&lt;/b&gt;\n&gt; &gt;            &lt;E units=3D&quot;cal/mol&quot;&gt;0.000000&lt;/E&gt;\n&gt; &gt;  =\r\n       &lt;/Arrhenius&gt;\n&gt; &gt;       &lt;/rateCoeff&gt;\n&gt; &gt;       &lt;reactants&gt;NO:1 NH2:1.=\r\n0&lt;/reactants&gt;\n&gt; &gt;       &lt;products&gt;N2:1.0 H2O:1&lt;/products&gt;\n&gt; &gt;     &lt;/reactio=\r\nn&gt;\n&gt; &gt; \n&gt; &gt; As far as I can tell everything has been converted correctly.  =\r\nFrom \n&gt; &gt; what I have found by looking around the available Cantera \n&gt; &gt; li=\r\nterature, the only way that a negative pre-exponential factor can \n&gt; &gt; be u=\r\nsed inside Cantera is for it to be declared as part of a \n&gt; &gt; duplicate rea=\r\nction, be declared as having the option negative_A, and\n\n&gt; &gt; have the total=\r\n overall rate be positive.  Something is happening \n&gt; &gt; here though, as the=\r\n even the rate coefficients are being returned as\n\n&gt; &gt; &quot;nan&quot; values.  This =\r\nis consistent with both the forward and reverse \n&gt; &gt; coefficients, and obvi=\r\nously the forward and reverse rates of \n&gt; &gt; progress.  Am I understanding a=\r\nll this correctly?\n&gt; &gt; \n&gt; &gt; As far as I can tell, I&#39;m within the parameters=\r\n set by Cantera to \n&gt; &gt; use negative pre-exponential factors, but I&#39;m getti=\r\nng these bogus \n&gt; &gt; values in return, and am not sure (what to do)/(what to=\r\n check) next.\n\n&gt; &gt; Do you know what might be wrong?  Is there something els=\r\ne that I can\n\n&gt; &gt; check to make sure that I&#39;m doing things right?  Thanks.\n=\r\n&gt; &gt; \n&gt; &gt; Dan Smyth\n&gt; &gt;\n&gt;\n\n\n\n\n\n\n------------------------ Yahoo! Groups Spons=\r\nor --------------------~--&gt;\nSomething is new at Yahoo! Groups.  Check out t=\r\nhe enhanced email design.\nhttp://us.click.yahoo.com/SISQkA/gOaOAA/yQLSAA/UG=\r\nYolB/TM\n-------------------------------------------------------------------=\r\n-~-&gt; \n\n \nYahoo! Groups Links\n\n\n\n \n\n\n\n\n\n"}}