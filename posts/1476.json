{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":295660907,"authorName":"shyam_umd","from":"&quot;shyam_umd&quot; &lt;shyam_umd@...&gt;","profile":"shyam_umd","replyTo":"LIST","senderId":"tPnGz9tykJxrPb82wwqoo2ITmgZBOiHyy8cSYYh0aax9mKNuRjqEYETHUucpHUoynJOZ_36GZv5gzzH5iG2LueJ4bHHwMErm","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: Piston velocity in matlab.","postDate":"1169482852","msgId":1476,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGVwMm85NCtvcHY1QGVHcm91cHMuY29tPg==","inReplyToHeader":"PGVwMWQ1bCszODJyQGVHcm91cHMuY29tPg=="},"prevInTopic":1474,"nextInTopic":0,"prevInTime":1475,"nextInTime":1477,"topicId":1472,"numMessagesInTopic":3,"msgSnippet":"Hi, Yes, i am solving for an internal combustion engine case. I got the code which was posted by Dr.Goodwin earlier on to calculate piston speed, volume change","rawEmail":"Return-Path: &lt;shyam_umd@...&gt;\r\nReceived: (qmail 66182 invoked from network); 24 Jan 2007 15:32:39 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m39a.grp.scd.yahoo.com with QMQP; 24 Jan 2007 15:32:39 -0000\r\nReceived: from unknown (HELO n18d.bullet.scd.yahoo.com) (66.218.67.59)\n  by mta7.grp.scd.yahoo.com with SMTP; 24 Jan 2007 15:32:38 -0000\r\nReceived: from [66.218.69.5] by n18.bullet.scd.yahoo.com with NNFMP; 24 Jan 2007 15:32:15 -0000\r\nReceived: from [66.218.66.77] by t5.bullet.scd.yahoo.com with NNFMP; 24 Jan 2007 15:32:15 -0000\r\nX-Sender: shyam_umd@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nReceived: (qmail 68019 invoked from network); 22 Jan 2007 16:22:24 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m28.grp.scd.yahoo.com with QMQP; 22 Jan 2007 16:22:24 -0000\r\nReceived: from unknown (HELO n26c.bullet.scd.yahoo.com) (66.218.67.218)\n  by mta3.grp.scd.yahoo.com with SMTP; 22 Jan 2007 16:22:24 -0000\r\nReceived: from [209.73.164.86] by n26.bullet.scd.yahoo.com with NNFMP; 22 Jan 2007 16:20:53 -0000\r\nReceived: from [66.218.66.80] by t8.bullet.scd.yahoo.com with NNFMP; 22 Jan 2007 16:20:53 -0000\r\nDate: Mon, 22 Jan 2007 16:20:52 -0000\r\nTo: cantera@yahoogroups.com\r\nMessage-ID: &lt;ep2o94+opv5@...&gt;\r\nIn-Reply-To: &lt;ep1d5l+382r@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nFrom: &quot;shyam_umd&quot; &lt;shyam_umd@...&gt;\r\nSubject: Re: Piston velocity in matlab.\r\nX-Yahoo-Group-Post: member; u=295660907; y=Yxv2xiyMJI2-NpA4gcYyMvXApXIBDmqVifRhCawiKYd5FFW-\r\nX-Yahoo-Profile: shyam_umd\r\nX-eGroups-Approved-By: dggoodwin &lt;dgoodwin@...&gt; via web; 24 Jan 2007 15:32:15 -0000\r\n\r\nHi,\n  Yes, i am solving for an internal combustion engine case. I got the\nc=\r\node which was posted by Dr.Goodwin earlier on to calculate piston\nspeed, vo=\r\nlume change in python. I am having trouble getting the\nmixture to ignite th=\r\no. Even with the right mixture, i seem to be only\ngetting a pressure and te=\r\nmperature rise only due to the compression\nand not combustion. But my immed=\r\niate problem is to get the same to\nwork in matlab as i want to integrate th=\r\nat with another code that\nsimulates the engine. I would really appreciate i=\r\nf someone could check\nto see if there is a function called setVelocity.m fi=\r\nle in their\ncantera installation folder. The function seems to exist in the=\r\n cpp\nfile but is missing the matlab toolbox. \nThanks, Shyam.\n\n\n--- In cante=\r\nra@yahoogroups.com, &quot;namcho5&quot; &lt;namcho5@...&gt; wrote:\n&gt;\n&gt; Are you solving an i=\r\nnternal combustion engine case? The following \n&gt; part is to calculate corre=\r\nct piston speed, cylinder volume, and rate \n&gt; of volume change using Python=\r\n, but I could not get meaningful \n&gt; cylinder pressure when using ReactorNet=\r\n advance. I&#39;m not good at \n&gt; Cantera though. Let us know if it works for yo=\r\nu. Nam \n&gt; \n&gt; # engine parameters \n&gt; bore =3D 85  * mm\n&gt; stroke =3D 81 * mm\n=\r\n&gt; conrod =3D 170 * mm  (do you know the connecting rod length?)\n&gt; squish =\r\n=3D 2 * mm (you can calculate this from comp. ratio)\n&gt; area =3D Pi*bore*bor=\r\ne/ 4.0\n&gt; disp =3D stroke * area\n&gt; cr =3D 9.3\n&gt; rpm =3D 2000\n&gt; degivc =3D -1=\r\n45.0  ! intake valve closure IVC\n&gt; degevo =3D 140.0   ! exhaust valve open =\r\nEVO\n&gt; degstep =3D 1 (it could be too rough for combustion analysis)\n&gt; # IVC=\r\n condition\n&gt; temp =3D 700.0\n&gt; pres =3D 10.0*OneAtm\n&gt; phi =3D 0.6 (equivalen=\r\nce ratio)\n&gt; # (evo-ivc)=3D140+145=3D285, 285/720*120/2000rpm=3D?? sec.\n&gt; ts=\r\ntop =3D (degevo-degivc)/720.*120/rpm\n&gt; delt =3D degstep/720.*120/rpm\n&gt; \n&gt; #=\r\n advance the simulation in time\n&gt; npoints=3Dint( (degevo-degivc)/degstep ) =\r\n+ 1\n&gt; \n&gt; for n in range(1, npoints) :\n&gt;       t =3D delt*n\n&gt;       theta=3D=\r\nt*Pi/30.*rpm + degivc/180.*Pi\n&gt;       ang=3Dtheta*180./Pi\n&gt; #input A=3D ang=\r\nle in deg. \n&gt; #output B=3D volume, C=3D dv/dtheta, D=3D piston speed\n&gt; #you=\r\n may need volume change dv/dtheta in the energy equation \n&gt; #cylinder volum=\r\ne and piston speed have been checked.\n&gt;       alolr=3Dconrod/(0.5*stroke)\n&gt;=\r\n #     pi=3Dacos(-1.)\n&gt;       volc =3D 0.25*Pi*bore*bore*stroke/(cr-1.0)\n&gt; =\r\n      term=3Dalolr+1.-cos(theta)-sqrt(alolr*alolr-sin(theta)*sin(theta))\n&gt; =\r\n      B=3Dvolc*(1.+(cr-1.)*0.5*term)\n&gt;       term2=3D1.+cos(theta)/sqrt(alo=\r\nlr*alolr-sin(theta)*sin(theta))\n&gt;       C=3Dvolc * (cr-1.)*0.5 * sin(theta)=\r\n * term2 * Pi/30.*rpm\n&gt;       mps=3D2.0*stroke*rpm/60.  (mean piston speed)=\r\n\n&gt;       D=3Dmps*Pi*0.5*sin(theta)*( 1 + cos(theta)/sqrt(alolr**2-sin\n&gt; (th=\r\neta)**2) )     \n&gt;       cyl_vol =3D B\n&gt; #     print &#39;step=3D&#39;,n,&#39; CA=3D&#39;,an=\r\ng,&#39; vol(cc)=3D&#39;,B*1e6,&#39; dvdt(m3/s)\n&gt; =3D&#39;,C,&#39;speed(m/s)=3D&#39;,D \n&gt; \n&gt; \n&gt; \n&gt; \n=\r\n&gt; --- In cantera@yahoogroups.com, &quot;shyam_umd&quot; &lt;shyam_umd@&gt; wrote:\n&gt; &gt;\n&gt; &gt; H=\r\ni,\n&gt; &gt;   I&#39;ve been trying to implement a piston moving in a cylinder in\n&gt; &gt;=\r\n cantera using matlab but havent had any success yet. I was able to \n&gt; get =\r\nthe same working in python using a code that dr.goodwin had \n&gt; posted on th=\r\nis group. \n&gt; &gt;   One thing i noticed is that there is no setVelocity.m file=\r\n in my\n&gt; &gt; installation in the C:&#92;Cantera&#92;MATLAB&#92;toolbox&#92;cantera&#92;@Wall. I t=\r\nhink\n&gt; &gt; there should be a file so that in matlab i can call this function =\r\nto\n&gt; &gt; set the piston velocity. I tried to code a function for setVelocity =\r\n\n&gt; by\n&gt; &gt; myself and this is what i put in:\n&gt; &gt; \n&gt; &gt; function setVelocity(w=\r\n, v)\n&gt; &gt; % SETVELOCITY - \n&gt; &gt; %   \n&gt; &gt; wallmethods(10, wall_hndl(w), v);\n&gt; =\r\n&gt; The &#39;10&#39; is because in the c++ header file for\n&gt; &gt; wallmethods..&#39;10&#39;corre=\r\nsponds to set_wall velocity.\n&gt; &gt; But i am unable to get it to work for me.\n=\r\n&gt; &gt; This is the main part of my code i am using in matlab:\n&gt; &gt; \n&gt; &gt; % unit =\r\nconversion factors\n&gt; &gt; mm =3D 0.001;\n&gt; &gt; cm =3D 0.01;\n&gt; &gt; \n&gt; &gt; % piston par=\r\nameters\n&gt; &gt; bore =3D 85.0 * mm;\n&gt; &gt; stroke =3D 81.0 * mm;\n&gt; &gt; area =3D pi*b=\r\nore*bore/4.0;\n&gt; &gt; disp =3D stroke * area;\n&gt; &gt; compression_ratio =3D 9.3;\n&gt; =\r\n&gt; \n&gt; &gt; rpm =3D 2000.0;\n&gt; &gt; freq =3D rpm * 60.0;\n&gt; &gt; omega =3D 2*pi*freq;\n&gt; =\r\n&gt; cyl_height =3D (1.0/compression_ratio + 1.0)*stroke;\n&gt; &gt; cyl_vol =3D cyl_=\r\nheight*area;\n&gt; &gt; % set the initial conditions\n&gt; &gt; set(gas,&#39;T&#39;,300.0,&#39;P&#39;,one=\r\natm,&#39;X&#39;,&#39;CH4:1, O2:2, N2:7.52&#39;);\n&gt; &gt; env =3D Reservoir(gas);\n&gt; &gt; % create a=\r\n reactor, and insert the gas\n&gt; &gt; r =3D Reactor(gas);\n&gt; &gt; setInitialVolume(r=\r\n,cyl_vol);\n&gt; &gt; % create a reactor network and insert the reactor\n&gt; &gt; networ=\r\nk =3D ReactorNet({r});\n&gt; &gt; v =3D Func(&#39;fourier&#39;, 4,&#39;omega, (0.0, 0.0), (0.0=\r\n, -\n&gt; 0.5*omega*stroke)&#39;);\n&gt; &gt; piston =3D Wall(&#39;r, env&#39;);\n&gt; &gt; install(pisto=\r\nn,r,env);\n&gt; &gt; setArea(piston,area);\n&gt; &gt; setVelocity(piston,v);\n&gt; &gt; \n&gt; &gt; t =\r\n=3D 0;\n&gt; &gt; dt =3D 1.0e-5;\n&gt; &gt; t0 =3D cputime;\n&gt; &gt; for n =3D 1:100\n&gt; &gt;     t=\r\n =3D 0.1*n/freq;\n&gt; &gt;     advance(network,t);\n&gt; &gt;     tim(n) =3D time(r);\n&gt; =\r\n&gt;     temp(n) =3D temperature(r);  \n&gt; &gt;     Vol(n) =3D volume(r);\n&gt; &gt;     p=\r\nres(n) =3D pressure(r);\n&gt; &gt;   x(n,1:3) =3D moleFraction(gas,{&#39;OH&#39;,&#39;H&#39;,&#39;H2&#39;}=\r\n);\n&gt; &gt; end\n&gt; &gt;\n&gt;\n\n\n\n"}}