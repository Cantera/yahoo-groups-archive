{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":32942367,"authorName":"Moffat, Harry K","from":"&quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;","profile":"hkmoffat","replyTo":"LIST","senderId":"ca3wh4iwtjmKOSfCxohVw3q7HR3XSMOIv69l9E-bm5lFWPut0j47LbAOyA2b54Mc-SRUNocPBme-ztU_xidqnpZ_d8QQwW8Bc4XI5nw","spamInfo":{"isSpam":false,"reason":"12"},"subject":"RE: [cantera] Re: Convergence problem in setState_UV","postDate":"1201716689","msgId":1830,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNBQ0M3ODk3QTk0NjMxNDFCRTBEOTM4RkMzMURGRDE5MDNFMzZCQTdARVMyMlNOTE5ULnNybi5zYW5kaWEuZ292Pg==","inReplyToHeader":"PGZucGRnbytrcmo5QGVHcm91cHMuY29tPg==","referencesHeader":"PDg0MDIzMzgzNy4xNzYwNDEyMDE2MzY4NTQ5NjcuSmF2YU1haWwub3NnQG9zZ2phczAyLmNucy51ZmwuZWR1PiA8Zm5wZGdvK2tyajlAZUdyb3Vwcy5jb20+"},"prevInTopic":1829,"nextInTopic":0,"prevInTime":1829,"nextInTime":1831,"topicId":1828,"numMessagesInTopic":3,"msgSnippet":"Hi I think I agree with Anatoli. There seems to be condition where the temperature or specific volume has ventured  out of bounds. I ve just checked into the","rawEmail":"Return-Path: &lt;hkmoffa@...&gt;\r\nX-Sender: hkmoffa@...\r\nX-Apparently-To: cantera@yahoogroups.com\r\nX-Received: (qmail 13920 invoked from network); 30 Jan 2008 18:11:43 -0000\r\nX-Received: from unknown (69.147.108.201)\n  by m45.grp.scd.yahoo.com with QMQP; 30 Jan 2008 18:11:43 -0000\r\nX-Received: from unknown (HELO sentry.sandia.gov) (132.175.109.20)\n  by mta2.grp.re1.yahoo.com with SMTP; 30 Jan 2008 18:11:42 -0000\r\nX-Received: from [132.175.109.1] by sentry.sandia.gov with ESMTP (SMTP\n Relay 01 (Email Firewall v6.3.1)); Wed, 30 Jan 2008 11:11:30 -0700\r\nX-Server-Uuid: AA8306FD-23D1-4E5B-B133-B2D9F10C3631\r\nX-Received: from ES23SNLNT.srn.sandia.gov (ec03snlnt.sandia.gov\n [134.253.164.158] (may be forged)) by mailgate.sandia.gov (\n 8.14.1/8.14.1) with ESMTP id m0UIBUCZ014745 for\n &lt;cantera@yahoogroups.com&gt;; Wed, 30 Jan 2008 11:11:30 -0700\r\nX-Received: from ES22SNLNT.srn.sandia.gov ([134.253.164.29]) by\n ES23SNLNT.srn.sandia.gov with Microsoft SMTPSVC(6.0.3790.3959); Wed, 30\n Jan 2008 11:11:30 -0700\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nDate: Wed, 30 Jan 2008 11:11:29 -0700\r\nMessage-ID: &lt;3ACC7897A9463141BE0D938FC31DFD1903E36BA7@...&gt;\r\nIn-Reply-To: &lt;fnpdgo+krj9@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [cantera] Re: Convergence problem in setState_UV\r\nThread-Index: AchjHJzXDaUAMnFMR3ivhvBvEqrOVgATajRw\r\nReferences: &lt;840233837.176041201636854967.JavaMail.osg@...&gt;\n &lt;fnpdgo+krj9@...&gt;\r\nTo: cantera@yahoogroups.com\r\nX-OriginalArrivalTime: 30 Jan 2008 18:11:30.0219 (UTC)\n FILETIME=[89A7DFB0:01C8636B]\r\nX-TMWD-Spam-Summary: TS=20080130181133; SEV=2.2.2; DFV=B2008013014;\n IFV=2.0.4,4.0-9; AIF=B2008013014; RPD=5.02.0125; ENG=IBF;\n RPDID=7374723D303030312E30413031303230342E34374130424444342E303143323A534346535441543838363133332C73733D312C6667733D30;\n CAT=NONE; CON=NONE\r\nX-MMS-Spam-Filter-ID: B2008013014_5.02.0125_4.0-9\r\nX-WSS-ID: 6BBE62584E0157375-01-01\r\nContent-Type: text/plain;\n charset=us-ascii\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Moffat, Harry K&quot; &lt;hkmoffa@...&gt;\r\nSubject: RE: [cantera] Re: Convergence problem in setState_UV\r\nX-Yahoo-Group-Post: member; u=32942367; y=7MZ47p3zvxuyNta5C6wy1yuCRxrW7VzevN4suVer5m5y0E0\r\nX-Yahoo-Profile: hkmoffat\r\n\r\nHi \n  I think I agree with Anatoli. There seems to be condition where the\nt=\r\nemperature or specific volume has ventured  out of bounds. I&#39;ve just\nchecke=\r\nd into the CVS repository an update to setState_HPorUV() that adds\nmore err=\r\nor information. You might want to get a new version of Cantera\nfrom the CVS=\r\n repository.\n\nAlso, NAN conditions propagate downstream. They should not or=\r\niginate\nwithin Cantera, I hope. However, they would propagate through Cante=\r\nra\nroutines. You should hunt down the origin of the NAN. On linux BSD unix\n=\r\nvariants, there is a command finite() that can help to do this. \n\nBest wish=\r\nes,\nHarry Moffat\n\n\nHarry Moffat                                            =\r\n (w) (505)\n844-6912\nNanoscale and Reactive Processes            (f)   (505)=\r\n 844-8251\nSandia National Laboratories\nhkmoffa@...\nP. O. Box 5800-08=\r\n36\nAlbuquerque, NM 87185-0836\n\n-----Original Message-----\nFrom: cantera@yah=\r\noogroups.com [mailto:cantera@yahoogroups.com] On Behalf\nOf avmokhov\nSent: W=\r\nednesday, January 30, 2008 1:46 AM\nTo: cantera@yahoogroups.com\nSubject: [ca=\r\nntera] Re: Convergence problem in setState_UV\n\nTo simplify the system of go=\r\nverning equations Cantera uses Energy and\nVolume as two thermodynamic param=\r\neters for describing a gas mixture in\nZero-D calculations. From other side,=\r\n the rates of chemical reactions\nare explicit functions of pressure and tem=\r\nperature. \nTherefore, on every time step, pressure and temperature are calc=\r\nulated\nfrom energy and volume in a setState_UV function. If this function c=\r\nan\nnot find temperature corresponding input energy, it throws exception\nwit=\r\nh a little bit misleading information (dt in the message is\ntemperature!). =\r\nIt seems that in your program you did not assign initial\nvalue for energy a=\r\nnd you get this exception.\n\nBest regards,\nAnatoli\n\n\n--- In cantera@yahoogro=\r\nups.com, Bhupinder Singh &lt;bsingh@...&gt; wrote:\n&gt;\n&gt; Hey everyone,\n&gt; \n&gt; I&#39;m try=\r\ning to resolve a convergence error problem.\n&gt; \n&gt; Here&#39;s what I&#39;m trying to =\r\ndo:\n&gt; -----------------------------\n&gt; \n&gt; 1. I need to solve a system of equ=\r\nations parallel with the zero \n&gt; dim. reactor model such that,\n&gt; I need to =\r\ncorrect for some of the species production terms at \n&gt; everytime step, and =\r\nsolve for additional\n&gt; set of variables M0 throuh M5 (y terms) and Q0 throu=\r\ngh Q5 (ydot \n&gt; terms)\n&gt; \n&gt; 2. I created a new class derived from the &quot;React=\r\nor&quot; class and \n&gt; reimplemented the virtual methods\n&gt;         in the origina=\r\nl class.\n&gt; \n&gt; 3. In the methods evalEqs and UpdateState, I have inserted my=\r\n \n&gt; variables M0 through M5 in array &quot;y&quot;\n&gt; and Q0 through Q5 in array &quot;ydot=\r\n&quot; at positions m_nsp+2.\n&gt; \n&gt; since y[0] =3D internal energy\n&gt;      y[1] =3D=\r\n volume\n&gt;         y[3] - y[m_nsp-1] are species mass fractions\n&gt; \n&gt; Another=\r\n parallel fortran code, that I call from within C++, gives \n&gt; me values of =\r\nthe variables Q&#39;s (Q0 through Q5) based on initial \n&gt; M&#39;s (M0 through M5) v=\r\nalues, and hence gives me a new complete data \n&gt; set for y and ydot arrays.=\r\n The integrator then integrates to a new \n&gt; y array (that gives me new init=\r\nial conditions of M&#39;s to recompute \n&gt; Q&#39;s)\n&gt; that I use to update my older =\r\nvariables in UpdateState method.\n&gt; \n&gt; I used an instance of this class in a=\r\n reactor code by using\n&gt; myclass r;\n&gt; \n&gt; instead of\n&gt; Reactor r;\n&gt; \n&gt; My pr=\r\noblem:\n&gt; -----------\n&gt; \n&gt; I get an error message as follows:\n&gt; \n&gt; Procedure=\r\n: setState_UV\n&gt; Error: no convergence. dt=3Dnan\n&gt; tol =3D 1e-08\n&gt; u =3D nan=\r\n v =3D 0.439382\n&gt; \n&gt; I get this message right after the first time step.\n&gt; =\r\n\n&gt; My Questions:\n&gt; -------------\n&gt; \n&gt; 1. Just to begin with, my Q (ydot) te=\r\nrms are not even coupled to \n&gt; the ydot[0] that is internal energy\n&gt; equati=\r\nons. why do I get a convergence error in u, when everything \n&gt; else is the =\r\nsame.\n&gt; \n&gt; 2. When I commented out the assignment lines for y and ydot, suc=\r\nh \n&gt; that I did create space in the array\n&gt; for my variables, but assigned =\r\nall of them values of zero, the \n&gt; code did work for a while, but looped\n&gt; =\r\nendlessly around the ignitor functor peak. I guess, that too had \n&gt; to do w=\r\nith convergence problem.\n&gt; In other words, I could see solutions only until=\r\n the igniter \n&gt; reservoir sent out a pulse of H atoms.\n&gt; As soon as the tem=\r\nperature pulse began to be sensed in the \n&gt; solution, each time-step calcul=\r\nation\n&gt; became extremely slow.\n&gt; \n&gt; 3. The only other way I could get this =\r\ncode to work, is to leave \n&gt; the original y and ydot arrays\n&gt; as they were =\r\nand create another integrator, y and ydot arrays to \n&gt; solve for my M varia=\r\nbles. This might be\n&gt; way too inefficient, I think. I don&#39;t quite see why t=\r\nhe approach I \n&gt; took isn&#39;t working! Would this alternate\n&gt; approach be a b=\r\netter way of handling the problem?\n&gt; \n&gt; I can&#39;t seem to resolve this proble=\r\nm, and need help with it.\n&gt; \n&gt; Any help would be appreciated. Please let me=\r\n know, if the \n&gt; information provided doesn&#39;t seem adequate or\n&gt; if any fur=\r\nther clarifications are necessary.\n&gt; \n&gt; \n&gt; Regards,\n&gt; \n&gt; Bhupinder\n&gt; \n&gt; --\n=\r\n&gt; Bhupinder Singh\n&gt; Department of Mechanical and Aerospace Engineering\n&gt; Un=\r\niversity of Florida\n&gt; Gainesville\n&gt; \n&gt; Ph: 352-392-4442 (O)\n&gt;     352-328-4=\r\n486 (Cell)\n&gt;\n\n\n\n\n \nYahoo! Groups Links\n\n\n\n\n\n\n"}}